(function(e){function t(t){for(var i,a,o=t[0],c=t[1],l=t[2],d=0,u=[];d<o.length;d++)a=o[d],r[a]&&u.push(r[a][0]),r[a]=0;for(i in c)Object.prototype.hasOwnProperty.call(c,i)&&(e[i]=c[i]);f&&f(t);while(u.length)u.shift()();return s.push.apply(s,l||[]),n()}function n(){for(var e,t=0;t<s.length;t++){for(var n=s[t],i=!0,a=1;a<n.length;a++){var o=n[a];0!==r[o]&&(i=!1)}i&&(s.splice(t--,1),e=c(c.s=n[0]))}return e}var i={},a={app:0},r={app:0},s=[];function o(e){return c.p+"js/"+({}[e]||e)+"."+{"chunk-e5aee030":"1147860f"}[e]+".js"}function c(t){if(i[t])return i[t].exports;var n=i[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,c),n.l=!0,n.exports}c.e=function(e){var t=[],n={"chunk-e5aee030":1};a[e]?t.push(a[e]):0!==a[e]&&n[e]&&t.push(a[e]=new Promise(function(t,n){for(var i="css/"+({}[e]||e)+"."+{"chunk-e5aee030":"b9cc5380"}[e]+".css",r=c.p+i,s=document.getElementsByTagName("link"),o=0;o<s.length;o++){var l=s[o],d=l.getAttribute("data-href")||l.getAttribute("href");if("stylesheet"===l.rel&&(d===i||d===r))return t()}var u=document.getElementsByTagName("style");for(o=0;o<u.length;o++){l=u[o],d=l.getAttribute("data-href");if(d===i||d===r)return t()}var f=document.createElement("link");f.rel="stylesheet",f.type="text/css",f.onload=t,f.onerror=function(t){var i=t&&t.target&&t.target.src||r,s=new Error("Loading CSS chunk "+e+" failed.\n("+i+")");s.request=i,delete a[e],f.parentNode.removeChild(f),n(s)},f.href=r;var p=document.getElementsByTagName("head")[0];p.appendChild(f)}).then(function(){a[e]=0}));var i=r[e];if(0!==i)if(i)t.push(i[2]);else{var s=new Promise(function(t,n){i=r[e]=[t,n]});t.push(i[2]=s);var l,d=document.createElement("script");d.charset="utf-8",d.timeout=120,c.nc&&d.setAttribute("nonce",c.nc),d.src=o(e),l=function(t){d.onerror=d.onload=null,clearTimeout(u);var n=r[e];if(0!==n){if(n){var i=t&&("load"===t.type?"missing":t.type),a=t&&t.target&&t.target.src,s=new Error("Loading chunk "+e+" failed.\n("+i+": "+a+")");s.type=i,s.request=a,n[1](s)}r[e]=void 0}};var u=setTimeout(function(){l({type:"timeout",target:d})},12e4);d.onerror=d.onload=l,document.head.appendChild(d)}return Promise.all(t)},c.m=e,c.c=i,c.d=function(e,t,n){c.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},c.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},c.t=function(e,t){if(1&t&&(e=c(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(c.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)c.d(n,i,function(t){return e[t]}.bind(null,i));return n},c.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return c.d(t,"a",t),t},c.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},c.p="/",c.oe=function(e){throw console.error(e),e};var l=window["webpackJsonp"]=window["webpackJsonp"]||[],d=l.push.bind(l);l.push=t,l=l.slice();for(var u=0;u<l.length;u++)t(l[u]);var f=d;s.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"0488":function(e,t,n){},"56d7":function(e,t,n){"use strict";n.r(t);n("cadf"),n("551c"),n("f751"),n("097d"),n("7e6a");var i=n("5c15");n("3756"),n("8aa8"),n("ed9c");i["a"].defaults.styling="bootstrap4",i["a"].defaults.icons="fontawesome5",window.PNotify=i["a"],window._=n("2ef0");try{window.Popper=n("f0bd").default,window.$=window.jQuery=n("1157"),n("4989")}catch(dn){}window.axios=n("bc3a"),window.axios.defaults.headers.common["X-Requested-With"]="XMLHttpRequest",localStorage.getItem("token")&&(window.axios.defaults.headers.common["Content-Type"]="application/json",window.axios.defaults.headers.common["Authorization"]="Bearer "+localStorage.getItem("token"));var a,r=n("2b0e"),s=n("8c4f"),o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.authenticated?n("div",{class:{"show-sidebar":e.showSidebar,"h-100":!0}},[n("MainNavbar",{attrs:{user:e.user,handleLogout:e.handleLogout}}),n("Sidebar",{attrs:{user:e.user,handleLogout:e.handleLogout,showSidebar:e.showSidebar,menu:e.menu}}),n("main",{staticClass:"h-100",attrs:{id:"content-wrapper"}},[n("div",{staticClass:"py-4"},[n("router-view",{attrs:{id:"main-wrapper"}})],1)])],1):e._e()},c=[],l=(n("a481"),n("cebc")),d=(n("96cf"),n("3b8d")),u=n("2f62"),f=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("nav",{staticClass:"navbar navbar-expand-md navbar-light navbar-laravel fixed-top"},[i("div",{staticClass:"container-fluid"},[i("router-link",{staticClass:"navbar-brand",attrs:{to:{path:"/"}}},[e._v("\n      Textiles Hernandez\n      "),i("img",{staticClass:"logo",attrs:{src:n("8d1b"),alt:"Logo"}})]),e.getNotifications().length?i("router-link",{staticClass:"btn text-dark d-block d-md-none",attrs:{to:{path:"/notificaciones"}}},[i("i",{staticClass:"fa fa-bell fa-lg text-success"}),i("span",{staticClass:"badge badge-pill badge-danger"},[e._v(e._s(e.getNotifications().length))])]):e._e(),i("button",{staticClass:"navbar-toggler",attrs:{type:"button"},on:{click:e.toggleSidebar}},[i("span",{staticClass:"navbar-toggler-icon"})]),i("div",{staticClass:"collapse navbar-collapse",attrs:{id:"navbarSupportedContent"}},[i("div",{staticClass:"navbar-nav mr-auto"},[i("div",{staticClass:"btn-group",attrs:{role:"group"}},[i("button",{staticClass:"btn btn-secondary",on:{click:e.toggleSidebar}},[i("i",{staticClass:"fas fa-bars"})]),i("button",{staticClass:"btn btn-dark",on:{click:function(){return e.$router.go(-1)}}},[i("i",{staticClass:"fas fa-arrow-left"})]),e.offices.length>1?i("div",{staticClass:"dropdown"},[i("a",{staticClass:"btn dropdown-toggle btn-light",attrs:{href:"#",role:"button",id:"navbarOffices","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"}},[e._v(e._s(e.selectedOffice.name||"Sucursales"))]),i("div",{staticClass:"dropdown-menu",attrs:{"aria-labelledby":"navbarOffices"}},e._l(e.offices,function(t){return i("button",{key:"office-list-"+t.id,staticClass:"dropdown-item pointer",class:{active:e.selectedOffice.id==t.id},on:{click:function(n){return e.selectOffice(t)}}},[e._v(e._s(t.name))])}),0)]):e._e()])]),i("div",{staticClass:"navbar-nav ml-auto"},[e.getNotifications().length?i("div",{staticClass:"dropdown"},[i("a",{staticClass:"btn text-dark",attrs:{href:"#",role:"button",id:"notifications","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"}},[i("i",{staticClass:"fa fa-bell fa-lg text-success"}),i("span",{staticClass:"badge badge-pill badge-danger"},[e._v(e._s(e.getNotifications().length))])]),i("Notifications",{attrs:{items:e.getNotifications(),"aria-labelledby":"notifications",showNotification:e.showNotification,readNotification:e.readNotification}})],1):e._e(),i("div",{staticClass:"dropdown"},[i("a",{staticClass:"btn dropdown-toggle text-dark",attrs:{href:"#",role:"button",id:"dropdownMenuLink","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"}},[e._v("Hola, "+e._s(e.user.name))]),i("div",{staticClass:"dropdown-menu",attrs:{"aria-labelledby":"dropdownMenuLink"}},[i("router-link",{staticClass:"dropdown-item",attrs:{to:{path:"/ajustes"}}},[e._v("Ajustes")]),i("button",{staticClass:"dropdown-item pointer",on:{click:e.handleLogout}},[e._v("Cerrar Sesion")])],1)])])])],1)])},p=[],m=n("768b"),h=(n("7f7f"),{functional:!0,render:function(e,t){var n=t.props;return e("div",{class:"dropdown-item"},[e("div",[n.item.message]),e("div",{class:"btn-group btn-group-sm"},[e("button",{class:"btn btn-link",on:{click:function(){return n.showNotification(n.item)}}},["Mostrar"]),e("button",{class:"btn btn-link",on:{click:function(){return n.readNotification(n.item)}}},["Marcar como leido"])])])}}),y={functional:!0,render:function(e,t){var n=t.props;return e("div",{class:"dropdown-menu dropdown-menu-right",attrs:{"aria-labelledby":n.ariaLabelledby}},[n.items.map(function(t){return e(h,{attrs:{item:t,showNotification:n.showNotification,readNotification:n.readNotification}})})])}},g=y,b=n("a4bb"),v=n.n(b),w=(n("ac6a"),n("c5f6"),{name:"Office",store_entity:!0,display_name:"Sucursales",display_single_name:"Sucursal",url:"offices",field_configurations:{form:{order:["name","address","phone"],showDeleteButton:!0},list:{order:["id","name","address","phone"],showCreateButton:!0,showEditButton:!0,showDeleteButton:!0}},fields:{id:{type:Number,is_primary:!0,auto_generated:!0,display_name:"ID"},name:{type:String,display_name:"Nombre",required:!0,render_type:"text"},address:{type:String,display_name:"Dirección",render_type:"text"},phone:{type:String,display_name:"Teléfono",render_type:"text"}}}),k=w,O={functional:!0,render:function(e,t){var n=t.props;return e("div",{class:"color-box",style:{background:n.value}})}},x=O,C={name:"Color",store_entity:!0,display_name:"Colores",display_single_name:"Color",url:"colors",field_configurations:{form:{order:["name","value"],showDeleteButton:!0},list:{order:["id","name","value"],showCreateButton:!0,showEditButton:!0,showDeleteButton:!0}},fields:{id:{type:Number,is_primary:!0,auto_generated:!0,display_name:"ID"},name:{type:String,display_name:"Nombre",required:!0,render_type:"text"},value:{type:String,display_name:"Color",default:"#000000",formatter:x,render_type:"color",class:"text-center"}}},j=C,S={name:"Design",store_entity:!0,display_name:"Diseños",display_single_name:"Diseño",url:"designs",field_configurations:{form:{order:["name"],showDeleteButton:!0},list:{order:["id","name"],showCreateButton:!0,showEditButton:!0,showDeleteButton:!0}},fields:{id:{type:Number,is_primary:!0,auto_generated:!0,display_name:"ID"},name:{type:String,display_name:"Nombre",required:!0,render_type:"text"}}},H=S,I=n("e814"),q=n.n(I),N=(n("6b54"),function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:".",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:",";try{t=Math.abs(t),t=isNaN(t)?2:t;var a=e<0?"-":"",r=q()(e=Math.abs(Number(e)||0).toFixed(t)).toString(),s=r.length>3?r.length%3:0;return a+(s?r.substr(0,s)+i:"")+r.substr(s).replace(/(\d{3})(?=\d)/g,"$1"+i)+(t?n+Math.abs(e-r).toFixed(t).slice(2):"")}catch(dn){console.log(dn)}}),D=N,B={functional:!0,render:function(e,t){var n=t.props;return e("div",[n.value?"$"+D(n.value):""])}},$=B,E={name:"Fabric",store_entity:!0,display_name:"Telas",display_single_name:"Tela",url:"fabrics",field_configurations:{form:{order:["name","buy_price","sell_price"],showDeleteButton:!0},list:{order:["id","name","buy_price","sell_price"],showCreateButton:!0,showEditButton:!0,showDeleteButton:!0}},fields:{id:{type:Number,is_primary:!0,auto_generated:!0,display_name:"ID"},name:{type:String,display_name:"Nombre",required:!0,render_type:"text"},buy_price:{type:String,display_name:"Precio de Compra",formatter:$,class:"text-right",render_type:"number"},sell_price:{type:String,display_name:"Precio de Venta",formatter:$,class:"text-right",render_type:"number"}}},R=E,P=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("input",{staticClass:"form-control",attrs:{id:e.id,type:"text",required:e.required,disabled:e.disabled},domProps:{value:e.search},on:{input:e.onChange}}),e.value?e._e():n("div",{staticClass:"search-list"},[n("div",{staticClass:"list-group"},e._l(e.results,function(t){return n("div",{key:"item-"+e.entity+"-"+t.id,staticClass:"list-group-item p-2",on:{click:function(n){return e.selectItem(t.id,t.value)}}},[e.customRenderer?n("CustomRenderer",{attrs:{value:t,renderer:e.customRenderer}}):n("b",[e._v(e._s(t.value))])],1)}),0)])])},U=[],M=(n("386d"),n("ed08")),G={functional:!0,render:function(e,t){var n=t.props;return e(n.renderer,{props:Object(l["a"])({},n)})}},T=G,L={components:{CustomRenderer:T},props:{id:{required:!0},disabled:{default:!1},entity:{required:!0},required:{default:!1},changeHandler:{required:!0},currentValue:{default:""},customRenderer:{default:null}},data:function(){return{search:"",value:null,results:[]}},created:function(){var e=Object(d["a"])(regeneratorRuntime.mark(function e(){var t,n,i,a;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(!this.currentValue){e.next=8;break}return e.next=3,Object(M["a"])({url:"/api/".concat(this.entity,"/search"),params:{id:this.currentValue}});case 3:t=e.sent,n=Object(m["a"])(t,2),i=n[0],a=n[1],i||this.selectItem(a.id,a.value);case 8:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),methods:{debounceHandler:_.debounce(function(e,t){this[e](t)},600),onChange:function(e){this.search=e.target.value,this.debounceHandler("getItems",this.search)},selectItem:function(e,t){this.search=t,this.value=e,this.changeHandler(this.id,e)},getItems:function(){var e=Object(d["a"])(regeneratorRuntime.mark(function e(t){var n,i,a,r;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(this,this.value=null,this.results=[],t){e.next=6;break}return this.changeHandler(this.id,null),e.abrupt("return");case 6:return e.next=8,Object(M["a"])({url:"/api/".concat(this.entity,"/search"),params:{search:t}});case 8:n=e.sent,i=Object(m["a"])(n,2),a=i[0],r=i[1],a||(this.results=r);case 13:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}()}},F=L,A=n("2877"),V=Object(A["a"])(F,P,U,!1,null,null,null),J=V.exports,W={name:"Product",store_entity:!0,display_name:"Modelos",display_single_name:"Modelo",url:"products",field_configurations:{form:{order:["sku","fabric_id","design_id","color_id"],showDeleteButton:!0},list:{order:["id","sku","fabric.name","design.name","color.value"],showCreateButton:!0,showEditButton:!0,showDeleteButton:!0}},fields:{id:{type:Number,is_primary:!0,auto_generated:!0,display_name:"ID"},sku:{type:String,display_name:"Codigo",required:!0,render_type:"text"},image:{type:String,display_name:"Imagen"},fabric:{type:Object,display_name:"Tela",required:!0},fabric_id:{type:Number,display_name:"Tela",required:!0,render_type:"custom",renderer:J,props:{entity:"fabrics"}},design:{type:Object,display_name:"Diseño"},design_id:{type:Number,display_name:"Diseño",render_type:"custom",renderer:J,props:{entity:"designs"}},color:{type:Object,display_name:"Color",formatter:x},color_id:{type:Number,display_name:"Color",render_type:"custom",renderer:J,props:{entity:"colors"}}}},z=W,X={name:"Supplier",store_entity:!0,display_name:"Proveedores",display_single_name:"Proveedor",url:"suppliers",field_configurations:{form:{order:["name","address","phone","mobilephone","email","credit_days","comments"],showDeleteButton:!0},list:{order:["id","name","address","phone","mobilephone","email","credit_days","comments"],showCreateButton:!0,showEditButton:!0,showDeleteButton:!0}},fields:{id:{type:Number,is_primary:!0,auto_generated:!0,display_name:"ID"},name:{type:String,display_name:"Nombre",required:!0,render_type:"text"},address:{type:String,display_name:"Dirección",render_type:"text"},phone:{type:String,display_name:"Teléfono",render_type:"text"},mobilephone:{type:String,display_name:"Celular",render_type:"text"},email:{type:String,display_name:"Correo",render_type:"email"},credit_days:{type:Number,display_name:"Dias de crédito",render_type:"number"},comments:{type:String,display_name:"Observaciones",render_type:"textarea"}}},Q=X,K={name:"Customer",store_entity:!0,display_name:"Clientes",display_single_name:"Cliente",url:"customers",field_configurations:{form:{order:["name","address","phone","mobilephone","email","credit_days","comments"],showDeleteButton:!0},list:{order:["id","name","address","phone","mobilephone","email","credit_days","comments"],showCreateButton:!0,showEditButton:!0,showDeleteButton:!0}},fields:{id:{type:Number,is_primary:!0,auto_generated:!0,display_name:"ID"},name:{type:String,display_name:"Nombre",required:!0,render_type:"text"},address:{type:String,display_name:"Dirección",render_type:"text"},phone:{type:String,display_name:"Teléfono",render_type:"text"},mobilephone:{type:String,display_name:"Celular",render_type:"text"},email:{type:String,display_name:"Correo",render_type:"email"},credit_days:{type:Number,display_name:"Dias de crédito",render_type:"number"},comments:{type:String,display_name:"Observaciones",render_type:"textarea"}}},Y=K,Z=(n("7514"),[{id:1,value:"Administrador"},{id:2,value:"Vendedor"},{id:3,value:"Cliente"}]),ee={functional:!0,render:function(e,t){var n=t.props;return e("div",[Z.find(function(e){return e.id==n.value}).value])}},te={name:"User",store_entity:!0,display_name:"Usuarios",display_single_name:"Usuario",url:"users",field_configurations:{form:{order:["name","email","password","c_password","user_type","customer_id"],showDeleteButton:!0},list:{order:["id","name","email","user_type","customer.name"],showCreateButton:!0,showEditButton:!0,showDeleteButton:!0}},fields:{id:{type:Number,is_primary:!0,auto_generated:!0,display_name:"ID"},name:{type:String,display_name:"Nombre",required:!0,render_type:"text"},email:{type:String,display_name:"Correo",required:!0,render_type:"email"},password:{type:String,display_name:"Contraseña",required:!0,render_type:"password",hideOnUpdate:!0},c_password:{type:String,display_name:"Confirmar Contraseña",required:!0,render_type:"password",hideOnUpdate:!0},user_type:{type:Number,display_name:"Tipo de Usuario",required:!0,formatter:ee,class:"text-center",render_type:"select",props:{values:Z}},customer:{type:Object,display_name:"Cliente"},customer_id:{type:Number,display_name:"Cliente",render_type:"custom",renderer:J,props:{entity:"customers"},hideOnUpdate:!0}}},ne=te,ie={functional:!0,render:function(e,t){var n=t.props;return e("div",{attrs:{"data-toggle":n.dataToggle,"data-target":n.dataTarget,"aria-controls":n.ariaControls,"aria-expanded":n.ariaExpanded}},[n.value.sku," ",n.value.fabric.name," ",n.value.design?n.value.design.name:"",n.value.color?e(x,{attrs:{value:n.value.color.value}}):null])}},ae=ie,re={functional:!0,render:function(e,t){var n=t.props;return e("div",[n.value.value?e(x,{attrs:{value:n.value.value}}):null])}},se=re,oe={name:"Stock",store_entity:!0,display_name:"Almacen",display_single_name:"Almacen",url:"stocks",field_configurations:{form:{order:["office_id","product_id","stock"]},list:{order:["id","office.name","product.sku","product.fabric.name","product.design.name","product.color","stock"],showCreateButton:!0,showEditButton:!0}},fields:{id:{type:Number,is_primary:!0,auto_generated:!0,display_name:"ID"},office:{type:Object,display_name:"Sucursal"},office_id:{type:Number,display_name:"Sucursal",render_type:"custom",disableOnUpdate:!0,renderer:J,props:{entity:"offices"},required:!0},product:{type:Object,display_name:"Modelo"},product_id:{type:Number,display_name:"Modelo",render_type:"custom",disableOnUpdate:!0,renderer:J,props:{entity:"products",customRenderer:ae},required:!0},"product.fabric":{display_name:"Tela"},"product.design":{display_name:"Diseño"},"product.color":{display_name:"Color",class:"text-center",formatter:se},stock:{type:String,display_name:"Cantidad (m)",class:"text-right",render_type:"number",disable:!0,default:0}}},ce=oe,le=[{id:1,value:"Cancelado"},{id:2,value:"Pendiente"},{id:3,value:"Completado"}],de={functional:!0,render:function(e,t){var n=t.props;return e("div",[le.find(function(e){return e.id==n.value}).value])}},ue={name:"StockMovement",store_entity:!0,display_name:"Movimientos de Almacén",display_single_name:"Movimiento de Almacén",url:"stock_movements",field_configurations:{form:{order:["office_id","to_office_id"],showDeleteButton:!0},list:{order:["id","created_at","office.name","to_office.name","status","balance","total"],showCreateButton:!0,showEditButton:!0,showDeleteButton:!0}},fields:{id:{type:Number,is_primary:!0,auto_generated:!0,display_name:"ID"},created_at:{type:String,display_name:"Fecha"},office:{type:Object,display_name:"Desde Sucursal"},office_id:{type:Number,display_name:"Desde Sucursal",render_type:"custom",disableOnUpdate:!0,renderer:J,props:{entity:"offices"},required:!0},to_office:{type:Object,display_name:"Hacia Sucursal"},to_office_id:{type:Number,display_name:"Hacia Sucursal",render_type:"custom",disableOnUpdate:!0,renderer:J,props:{entity:"offices"},required:!0},status:{type:Number,display_name:"Estado",required:!0,formatter:de,class:"text-center",render_type:"select",props:{values:le}},balance:{type:Number,display_name:"Saldo",formatter:$,class:"text-right",render_type:"number"},total:{type:Number,display_name:"Total",formatter:$,class:"text-right",render_type:"number"}}},fe=ue,pe={name:"Notification",store_entity:!0,display_name:"Notificaciones",display_single_name:"Notificacion",url:"notifications",field_configurations:{form:{order:["name"],showDeleteButton:!0},list:{order:["id","message","created_at"],showCreateButton:!0,showDeleteButton:!0}},fields:{id:{type:Number,is_primary:!0,auto_generated:!0,display_name:"ID"},created_at:{type:String,display_name:"Fecha"},message:{type:String,display_name:"Mensaje",required:!0,render_type:"text"}}},me=pe,he={Office:k,Color:j,Design:H,Fabric:R,Product:z,Supplier:Q,Customer:Y,User:ne,Stock:ce,StockMovement:fe,Notification:me},ye={sucursales:"Office",colores:"Color",disenos:"Design",telas:"Fabric",modelos:"Product",clientes:"Customer",proveedores:"Supplier",usuarios:"User",almacen:"Stock","movimientos-almacen":"StockMovement",notificaciones:"Notification"},ge=function(e){var t;return v()(he).forEach(function(n){he[n].url==e&&(t=he[n])}),v()(ye).forEach(function(e){ye[e]==t.name&&(t=e)}),t},_e=function(e){return he[e]||he[ye[e]]},be=function(e){return!!he[e]||!!he[ye[e]]},ve=function(){var e={};return v()(he).forEach(function(t){he[t].store_entity&&(e[he[t].url]=[])}),e},we={components:{Notifications:g},props:{user:{required:!0},handleLogout:{required:!0}},methods:Object(l["a"])({showNotification:function(){var e=Object(d["a"])(regeneratorRuntime.mark(function e(t){var n,i,a,r;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return n=ge(t.entity.name),e.next=3,Object(M["a"])({url:"/api/notifications/".concat(t.id),data:{status:2},method:"put"});case 3:i=e.sent,a=Object(m["a"])(i,2),r=a[0],a[1],r&&console.log(r),this.$router.push("/".concat(n,"/lista/").concat(t.entity_value_id));case 9:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}(),readNotification:function(){var e=Object(d["a"])(regeneratorRuntime.mark(function e(t){var n,i,a;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(M["a"])({url:"/api/notifications/".concat(t.id),data:{status:2},method:"put"});case 2:n=e.sent,i=Object(m["a"])(n,2),a=i[0],i[1],a&&console.log(a);case 7:case"end":return e.stop()}},e)}));function t(t){return e.apply(this,arguments)}return t}()},Object(u["b"])("app",["toggleSidebar","selectOffice"])),computed:Object(l["a"])({},Object(u["e"])("app",["selectedOffice"]),Object(u["e"])("entities",["offices"]),Object(u["c"])("entities",["getNotifications"])),watch:{offices:function(e,t){e.length&&!t.length&&this.selectOffice(this.offices[0])}}},ke=we,Oe=(n("59f2"),Object(A["a"])(ke,f,p,!1,null,"acf7f918",null)),xe=Oe.exports,Ce=(n("bc17"),{props:{item:{required:!0}},data:function(){return{show:!1}},methods:Object(l["a"])({toggleChildrenMenu:function(){this.show=!this.show},shouldToggleSidebar:function(){window.innerWidth<992&&this.toggleSidebar()}},Object(u["b"])("app",["toggleSidebar"])),render:function(e){return this.item.children?e("div",[e("a",{class:"nav-link pointer",on:{click:this.toggleChildrenMenu}},[this.item.name,this.show?e("i",{class:"fas fa-arrow-up float-right"}):e("i",{class:"fas fa-arrow-down float-right"})]),this.show?this.item.children.map(function(t){return e(Ce,{attrs:{item:t},class:"pl-5"})}):null]):e("router-link",{attrs:{to:this.item.to},class:"nav-link",nativeOn:{click:this.shouldToggleSidebar}},[this.item.name])}}),je={functional:!0,render:function(e,t){var n=t.props;return n.offices.map(function(t){return e("button",{class:{"dropdown-item":!0,pointer:!0},on:{click:function(){return n.clickHandler(t)}}},[t.name])})}},Se={props:{user:{required:!0},handleLogout:{required:!0},showSidebar:{default:!1},menu:{default:function(){return[]}}},computed:Object(l["a"])({},Object(u["e"])("app",["selectedOffice"]),Object(u["e"])("entities",["offices"])),methods:Object(l["a"])({},Object(u["b"])("app",["selectOffice"])),render:function(e){return e("div",{attrs:{id:"sidebar-wrapper"},class:{"show-sidebar":this.showSidebar}},[e("div",{class:"h-100 sidebar-component"},[e("nav",{class:"nav flex-column"},[this.offices.length>1?e("div",{class:"dropdown"},[e("a",{class:"dropdown-toggle nav-link d-block d-md-none",attrs:{href:"#",role:"button",id:"sidebarOffices","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"}},[this.selectedOffice.name||"Sucursales"]),e("div",{class:"dropdown-menu",attrs:{"aria-labelledby":"sidebarOffices"}},[e(je,{attrs:{offices:this.offices,clickHandler:this.selectOffice}})])]):null,this.menu.map(function(t){return e(Ce,{attrs:{item:t}})}),e("a",{class:"nav-link",on:{click:this.handleLogout}},["Cerrar Sesión",e("i",{class:"fas fa-sign-out-alt float-right"})])])])])}},He=Se,Ie=3,qe=5,Ne={components:{MainNavbar:xe,Sidebar:He},data:function(){return{last_event_id:null}},created:function(){var e=Object(d["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.isAuthenticated();case 2:if(e.sent){e.next=6;break}this.handleLogout(),e.next=7;break;case 6:this.setupStream();case 7:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),computed:Object(l["a"])({},Object(u["e"])("auth",["authenticated","user"]),Object(u["e"])("app",["showSidebar","menu"])),methods:Object(l["a"])({redirectToLogin:function(){this.$router.replace("/login")},handleLogout:function(){this.logout({callback:this.redirectToLogin})},setupStream:function(){var e=this;a=new EventSource("/api/notification_events/subscribe?user_id=".concat(this.user.id,"&").concat(this.last_event_id?"last_event_id="+this.last_event_id:"")),a.addEventListener("open",function(e){3!==Ie&&(Ie=3,qe=5,PNotify.success("Conexión reestablecida"))},!1),a.addEventListener("initValues",function(t){var n=JSON.parse(t.data);e.last_event_id=t.lastEventId,e.setInitialValues(n)},!1),a.addEventListener("notification",function(t){var n=JSON.parse(t.data);e.last_event_id=t.lastEventId,e.setNotifications(n)},!1),a.addEventListener("error",function(t){t.target.close(),Ie>0?(Ie--,setTimeout(function(){qe*=2,e.setupStream()},1e3*qe),PNotify.error({title:"Error de Red",text:"Hay un error con su conexion, intentando restablecer en ".concat(qe," segundos")})):PNotify.error({title:"Error de Red",text:"No se ha podido reestablecer la conexion. Verifique su conexion a internet e intente de nuevo",hide:!1,modules:{Confirm:{confirm:!0,buttons:[{text:"Reintentar",click:function(t){e.setupStream(),t.update({hide:!0})}}]},Buttons:{closer:!1,sticker:!1}}})},!1)},closeStream:function(){a.close()}},Object(u["d"])("entities",["setInitialValues"]),Object(u["b"])("entities",["setNotifications"]),Object(u["b"])("auth",["isAuthenticated","logout"])),beforeDestroy:function(){a&&(a.close(),a=null)}},De=Ne,Be=(n("c6e2"),Object(A["a"])(De,o,c,!1,null,"b2904176",null)),$e=Be.exports,Ee=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.entity?n("div",{staticClass:"container-fluid"},[n("div",{staticClass:"card"},[n("div",{staticClass:"card-body"},[n("div",{staticClass:"card-title"},[n("h2",[e._v(e._s(e.entity.display_single_name))])]),n("FormGenerator",{attrs:{item:{},updatedItem:e.item,fields:e.entity.fields,field_configs:e.entity.field_configurations.form,submitHandler:e.submitHandler,changeHandler:e.changeHandler,saving:e.is_saving,cancel:function(){return e.$router.go(-1)}}})],1)]),n("div",{staticClass:"card"},[n("div",{staticClass:"card-body"},[n("div",{staticClass:"card-title"},[n("h2",[e._v("Rollos")]),n("FormGenerator",{attrs:{item:{},updatedItem:e.roll,fields:{yd_quantity:{display_name:"Cantidad (yd)",render_type:"number"},quantity:{required:!0,display_name:"Cantidad (m)",render_type:"number"}},field_configs:{order:["yd_quantity","quantity"]},submitHandler:e.rollSubmitHandler,changeHandler:e.rollChangeHandler,hideCancel:!0}}),e.item.stocks.length?n("DataGrid",{attrs:{items:e.item.stocks,fields:{id:{display_name:"ID"},quantity:{display_name:"Cantidad (m)",class:"text-right"}},field_configs:{order:["id","quantity"]},showDeleteButton:!0,deleteHandler:e.rollDeleteHandler}}):e._e()],1)])])]):e._e()},Re=[],Pe=(n("20d6"),n("59ad")),Ue=n.n(Pe),Me=(n("28a5"),{functional:!0,render:function(e,t){var n=t.props;switch(n.field.render_type){case"text":case"password":case"email":case"number":return e("input",{attrs:{id:n.field.id,type:n.field.render_type,autofocus:n.field.autofocus,required:n.field.required,placeholder:n.field.placeholder,step:"any",disabled:n.field.disable||n.isUpdate&&n.field.disableOnUpdate},class:"form-control",domProps:{value:n.field.value},on:{input:function(e){return n.changeHandler(n.field.id,e.target.value)}}});case"color":return e("input",{attrs:{id:n.field.id,type:n.field.render_type,autofocus:n.field.autofocus,required:n.field.required,disabled:n.field.disable||n.isUpdate&&n.field.disableOnUpdate},class:"form-control",domProps:{value:n.field.value},on:{change:function(e){return n.changeHandler(n.field.id,e.target.value)}}});case"textarea":return e("textarea",{attrs:{id:n.field.id,autofocus:n.field.autofocus,required:n.field.required,rows:"3",disabled:n.field.disable||n.isUpdate&&n.field.disableOnUpdate},class:"form-control",domProps:{value:n.field.value},on:{change:function(e){return n.changeHandler(n.field.id,e.target.value)}}});case"select":return e("select",{attrs:{id:n.field.id,autofocus:n.field.autofocus,required:n.field.required,disabled:n.field.disable||n.isUpdate&&n.field.disableOnUpdate},class:"form-control",domProps:{value:n.field.value},on:{change:function(e){return n.changeHandler(n.field.id,e.target.value)}}},[e("option",{attrs:{value:""}},["Selecciona una opción"]),n.field.props.values.map(function(t){return e("option",{domProps:{value:t.id}},[t.value])})]);case"checkbox":return e("div",{class:"form-check"},[e("label",{class:"form-check-label"},[e("input",{attrs:{id:n.field.id,type:"checkbox",required:n.field.required,disabled:n.field.disable||n.isUpdate&&n.field.disableOnUpdate},class:"form-check-input",domProps:{checked:n.field.value},on:{change:function(e){return n.changeHandler(n.field.id,e.target.checked)}}}),n.field.props.label])]);case"custom":return e(n.field.renderer,{attrs:{id:n.field.id,currentValue:n.field.value,required:n.field.required,changeHandler:n.changeHandler,disabled:n.field.disable||n.isUpdate&&n.field.disableOnUpdate},props:Object(l["a"])({},n.field.props)});default:return null}}}),Ge={functional:!0,render:function(e,t){var n=t.props;return e("form",{on:{submit:function(e){e.preventDefault(),n.submitHandler()}},attrs:{autocomplete:"off"}},[n.field_configs?n.field_configs.order.map(function(t){return n.isUpdate&&n.fields[t.split(".")[0]].hideOnUpdate?null:(n.updatedItem[t]||n.item[t]||void 0===n.fields[t.split(".")[0]].default||n.changeHandler(t,n.fields[t.split(".")[0]].default),e("div",{class:"form-group"},[e("label",{attrs:{for:t}},[n.fields[t.split(".")[0]].display_name]),e(Me,{attrs:{field:Object(l["a"])({},n.fields[t.split(".")[0]],{value:n.updatedItem[t]||n.item[t],id:t}),isUpdate:n.isUpdate,changeHandler:n.changeHandler}})]))}):null,e("div",{class:"form-group text-right"},[e("div",{class:"btn-group"},[n.showDeleteButton?e("button",{class:"btn btn-danger",attrs:{type:"button"},on:{click:function(){return n.deleteHandler(n.item.id)}}},["Borrar"]):null,n.hideCancel?null:e("button",{class:"btn btn-warning",attrs:{type:"button"},on:{click:n.cancel}},["Cancelar"]),e("button",{class:"btn btn-primary"},["Guardar"])])])])}},Te=Ge,Le={functional:!0,render:function(e,t){var n=t.props;return e("div",{class:"table-responsive"},[e("table",{class:"table table"},[n.field_configs?e("thead",{class:"thead-dark"},[e("tr",[n.field_configs.order.map(function(t){var i=Object(M["d"])(n.fields,t);return e("th",{class:"no-wrap ".concat(n.fields[i].class)},[n.fields[i].display_name])}),e("th",{class:"text-right"})])]):null,n.items&&n.items.length?e("tbody",[n.items.map(function(t){return e("tr",{class:"".concat(n.deleting==t.id?"table-dark inactive":"")},[n.field_configs.order.map(function(i){var a,r=Object(M["d"])(n.fields,i);return a=n.fields[r].formatter||null,e("router-link",{attrs:{tag:n.fields[r].is_primary?"th":"td",to:n.clickHandler?"":{path:t.id.toString()},append:!0},on:{click:n.clickHandler?n.clickHandler:function(){}},class:n.fields[r].class},[a?e(a,{attrs:{value:Object(M["c"])(t,i.split("."))}}):Object(M["c"])(t,i.split("."))])}),e("td",{class:"text-right"},[e("div",{class:"btn-group"},[n.buttons?n.buttons.map(function(i){return i.renderer?e(i.renderer,{props:Object(l["a"])({},Object(l["a"])({},i,{selectedItems:n.selectedItems,item:t,extraParams:n.extraParams}))}):e("button",{class:i.class,on:{click:function(){return i.action(t,n.extraParams)}}},[i.label," ",i.icon?e("i",{class:i.icon}):null])}):null,n.showEditButton?e("router-link",{attrs:{to:{path:t.id.toString()},append:!0},class:"btn btn-primary btn-sm"},[e("i",{class:"fas fa-edit"})]):null,n.showDeleteButton?e("button",{class:"btn btn-danger btn-sm",on:{click:function(){return n.deleteHandler(t.id)}},attrs:{disabled:n.deleting==t.id}},[e("i",{class:"fas ".concat(n.deleting==t.id?"fa-spinner fa-spin":"fa-trash")})]):null])])])})]):null])])}},Fe=Le,Ae={components:{FormGenerator:Te,DataGrid:Fe},data:function(){return{is_saving:!1,is_deleting:!1,entity:null,item:{stocks:[],stock:null,office_id:null},roll:{yd_quantity:null,quantity:null}}},created:function(){this.setEntity("almacen")},computed:Object(l["a"])({},Object(u["e"])("app",["selectedOffice"])),methods:{rollSubmitHandler:function(){var e=D(this.roll.quantity);this.item.stocks.push({quantity:e,remaining_quantity:e,id:this.item.stocks.length+1}),this.item.stock+=Ue()(e),this.roll.yd_quantity=null,this.roll.quantity=null},submitHandler:function(){var e=Object(d["a"])(regeneratorRuntime.mark(function e(){var t,n,i,a;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(!this.is_saving){e.next=2;break}return e.abrupt("return");case 2:return this.is_saving=!0,e.next=5,Object(M["a"])({url:"/api/".concat(this.entity.url),data:this.item,method:"post"});case 5:t=e.sent,n=Object(m["a"])(t,2),i=n[0],a=n[1],i?console.log(i):(PNotify.success("Registro guardado con exito"),this.$router.replace("/almacen/lista/".concat(a.data.id))),this.is_saving=!1;case 11:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),rollDeleteHandler:function(e){var t=this.item.stocks.findIndex(function(t){return t.id==e});-1!==t&&(this.item.stock-=Ue()(this.item.stocks[t].quantity),this.item.stocks.splice(t,1))},deleteHandler:function(){var e=Object(d["a"])(regeneratorRuntime.mark(function e(t){var n,i,a;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(!this.is_deleting){e.next=2;break}return e.abrupt("return");case 2:return this.is_deleting=!0,e.next=5,Object(M["a"])({url:"/api/".concat(this.entity.url,"/").concat(t),method:"delete"});case 5:n=e.sent,i=Object(m["a"])(n,1),a=i[0],a?console.log(a):this.$router.go(-1),this.is_deleting=!1;case 10:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}(),changeHandler:function(e,t){this.item[e]=t},rollChangeHandler:function(e,t){"yd_quantity"==e?this.roll.quantity=.9144*t:"quantity"==e&&(this.roll.yd_quantity=1.09361*t),this.roll[e]=t},setEntity:function(e){if(!be(e))return this.$router.replace("/");this.entity=_e(e),this.item.office_id=this.selectedOffice.id}}},Ve=Ae,Je=Object(A["a"])(Ve,Ee,Re,!1,null,null,null),We=Je.exports,ze=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.entity&&e.entityItem({entity:e.entity.url,id:e.$route.params.id})?n("div",{staticClass:"container-fluid"},[n("div",{staticClass:"card"},[n("div",{staticClass:"card-body"},[n("div",{staticClass:"card-title"},[n("h2",[e._v(e._s(e.entity.display_single_name)+" #"+e._s(e.entityItem({entity:e.entity.url,id:e.$route.params.id}).id))]),e.entityItem({entity:e.entity.url,id:e.$route.params.id}).updated_at?n("small",{staticClass:"text-muted"},[e._v("Ultima modificación: "+e._s(e.entityItem({entity:e.entity.url,id:e.$route.params.id}).updated_at))]):e._e()]),n("FormGenerator",{attrs:{item:e.entityItem({entity:e.entity.url,id:e.$route.params.id}),updatedItem:e.item,isUpdate:!0,fields:e.entity.fields,field_configs:e.entity.field_configurations.form,showDeleteButton:e.entity.field_configurations.form.showDeleteButton,submitHandler:e.submitHandler,changeHandler:e.changeHandler,deleteHandler:e.deleteHandler,saving:e.is_saving,deleting:e.is_deleting,cancel:function(){return e.$router.go(-1)}}})],1)]),n("div",{staticClass:"card"},[n("div",{staticClass:"card-body"},[n("div",{staticClass:"card-title"},[n("h2",[e._v("Rollos")]),n("FormGenerator",{attrs:{item:{},updatedItem:e.roll,fields:{yd_quantity:{display_name:"Cantidad (yd)",render_type:"number"},quantity:{required:!0,display_name:"Cantidad (m)",render_type:"number"}},field_configs:{order:["yd_quantity","quantity"]},submitHandler:e.rollSubmitHandler,changeHandler:e.rollChangeHandler,hideCancel:!0}}),e.entityItem({entity:e.entity.url,id:e.$route.params.id}).stocks.length?n("DataGrid",{attrs:{items:e.entityItem({entity:e.entity.url,id:e.$route.params.id}).stocks,fields:{id:{display_name:"ID"},quantity:{display_name:"Cantidad (m)",class:"text-right"},remaining_quantity:{display_name:"Cantidad Restante (m)",class:"text-right"}},field_configs:{order:["id","quantity","remaining_quantity"]},showDeleteButton:!0,deleteHandler:e.rollDeleteHandler}}):e._e()],1)])])]):e._e()},Xe=[],Qe={components:{FormGenerator:Te,DataGrid:Fe},data:function(){return{is_saving:!1,is_deleting:!1,entity:null,item:{stocks:[]},roll:{yd_quantity:null,quantity:null}}},created:function(){this.setEntity("almacen")},methods:{rollSubmitHandler:function(){var e=Object(d["a"])(regeneratorRuntime.mark(function e(){var t,n,i,a;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(!this.is_saving){e.next=2;break}return e.abrupt("return");case 2:return t=D(this.roll.quantity),this.is_saving=!0,e.next=6,Object(M["a"])({url:"/api/stock_details",data:{quantity:t,remaining_quantity:t,stock_id:this.entityItem({entity:this.entity.url,id:this.$route.params.id}).id},method:"post"});case 6:n=e.sent,i=Object(m["a"])(n,2),a=i[0],i[1],a?console.log(a):PNotify.success("Registro guardado con exito"),this.is_saving=!1,this.roll.yd_quantity=null,this.roll.quantity=null;case 14:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),submitHandler:function(){var e=Object(d["a"])(regeneratorRuntime.mark(function e(){var t,n,i,a=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(!this.is_saving){e.next=2;break}return e.abrupt("return");case 2:if(v()(this.item).forEach(function(e){return a.item[e]==a.entityItem({entity:a.entity.url,id:a.$route.params.id})[e]?delete a.item[e]:""}),v()(this.item).length){e.next=5;break}return e.abrupt("return",PNotify.info("No hay ningun cambio a guardar"));case 5:return this.is_saving=!0,e.next=8,Object(M["a"])({url:"/api/".concat(this.entity.url,"/").concat(this.$route.params.id),data:this.item,method:"put"});case 8:t=e.sent,n=Object(m["a"])(t,1),i=n[0],i?console.log(i):PNotify.success("Registro guardado con exito"),this.is_saving=!1;case 13:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),deleteHandler:function(){var e=Object(d["a"])(regeneratorRuntime.mark(function e(t){var n,i,a;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(!this.is_deleting){e.next=2;break}return e.abrupt("return");case 2:return this.is_deleting=!0,e.next=5,Object(M["a"])({url:"/api/".concat(this.entity.url,"/").concat(t),method:"delete"});case 5:n=e.sent,i=Object(m["a"])(n,1),a=i[0],a?console.log(a):this.$router.go(-1),this.is_deleting=!1;case 10:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}(),rollDeleteHandler:function(){var e=Object(d["a"])(regeneratorRuntime.mark(function e(t){var n,i,a;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(!this.is_deleting){e.next=2;break}return e.abrupt("return");case 2:return this.is_deleting=!0,e.next=5,Object(M["a"])({url:"/api/stock_details/".concat(t),method:"delete"});case 5:n=e.sent,i=Object(m["a"])(n,1),a=i[0],a&&console.log(a),this.is_deleting=!1;case 10:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}(),changeHandler:function(e,t){this.entityItem({entity:this.entity.url,id:this.$route.params.id})[e]!=t?this.item[e]=t:delete this.item[e]},rollChangeHandler:function(e,t){"yd_quantity"==e?this.roll.quantity=.9144*t:"quantity"==e&&(this.roll.yd_quantity=1.09361*t),this.roll[e]=t},setEntity:function(e){if(!be(e))return this.$router.replace("/");this.entity=_e(e)}},computed:Object(l["a"])({},Object(u["c"])("entities",["entityItem"]))},Ke=Qe,Ye=Object(A["a"])(Ke,ze,Xe,!1,null,null,null),Ze=Ye.exports,et=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.entity?n("div",{staticClass:"container-fluid"},[n("div",{staticClass:"card"},[n("div",{staticClass:"card-body"},[n("div",{staticClass:"card-title"},[n("h2",[e._v(e._s(e.entity.display_single_name))])]),n("FormGenerator",{attrs:{item:{},updatedItem:e.item,fields:e.entity.fields,field_configs:e.entity.field_configurations.form,submitHandler:e.submitHandler,changeHandler:e.changeHandler,saving:e.is_saving,cancel:function(){return e.$router.go(-1)}}})],1)]),n("div",{staticClass:"container-fluid"},[n("div",{staticClass:"row"},[e.entityItems({entity:"stocks",params:{office:{id:e.item.office_id}}}).length?n("div",{staticClass:"card col-md-4"},[n("div",{staticClass:"card-body"},[n("div",{staticClass:"card-title"},[n("h4",[e._v("\n              Desde: "+e._s(e.entityItems({entity:"stocks",params:{office:{id:e.item.office_id}}})[0].office.name)+"\n            ")])]),n("SearchBox",{attrs:{changeHandler:function(t){return e.debounceHandler("searchHandler",{key:"from_office_search",search:t})},search:e.from_office_search}}),n("div",{attrs:{id:"from-office"}},e._l(e.entityItems({entity:"stocks",params:{search:e.from_office_search,keys:["id","office.name","product.sku","product.fabric.name","product.design.name","product.color","stock"],office:{id:e.item.office_id}}}),function(t){return n("div",{key:"from-office-"+t.id,staticClass:"card"},[n("div",{staticClass:"card-header",attrs:{id:"from-office-"+t.id}},[n("h5",{staticClass:"mb-0"},[n("Product",{attrs:{value:t.product,"data-toggle":"collapse","data-target":"#from-office-stock-"+t.id,"aria-expanded":!0,"aria-controls":"from-office-stock-"+t.id}})],1)]),n("div",{staticClass:"collapse",attrs:{id:"from-office-stock-"+t.id,"aria-labelledby":"from-office-"+t.id,"data-parent":"#from-office"}},[n("div",{staticClass:"card-body"},[t.stocks.length?n("DataGrid",{attrs:{items:t.stocks,fields:{id:{display_name:"ID"},remaining_quantity:{display_name:"Cantidad Restante (m)",class:"text-right"}},selectedItems:e.selectedItems,buttons:[{icon:"fas fa-arrow-right",class:"btn btn-success btn-sm",action:e.addStock,unSelect:e.removeStock,renderer:e.AddStockButton}],field_configs:{order:["id","remaining_quantity"]},showDeleteButton:!1,extraParams:t}}):e._e()],1)])])}),0)],1)]):e._e(),n("div",{staticClass:"card col-md-4"},[n("div",{staticClass:"card-body"},[e._m(0),e.item.stocks.length?n("DataGrid",{attrs:{items:e.item.stocks,fields:{id:{display_name:"ID"},product:{display_name:"Modelo",formatter:e.Product},remaining_quantity:{display_name:"Cantidad (m)",class:"text-right"}},field_configs:{order:["id","product","remaining_quantity"]},showDeleteButton:!0,deleteHandler:e.removeStock}}):e._e()],1)]),e.entityItems({entity:"stocks",params:{office:{id:e.item.to_office_id}}}).length?n("div",{staticClass:"card col-md-4"},[n("div",{staticClass:"card-body"},[n("div",{staticClass:"card-title"},[n("h4",[e._v("\n              Hacia: "+e._s(e.entityItems({entity:"stocks",params:{office:{id:e.item.to_office_id}}})[0].office.name)+"\n            ")])]),n("SearchBox",{attrs:{changeHandler:function(t){return e.debounceHandler("searchHandler",{key:"to_office_search",search:t})},search:e.to_office_search}}),n("div",{attrs:{id:"to-office"}},e._l(e.entityItems({entity:"stocks",params:{search:e.to_office_search,keys:["id","office.name","product.sku","product.fabric.name","product.design.name","product.color","stock"],office:{id:e.item.to_office_id}}}),function(t){return n("div",{key:"to-office-"+t.id,staticClass:"card"},[n("div",{staticClass:"card-header",attrs:{id:"to-office-"+t.id}},[n("h5",{staticClass:"mb-0"},[n("Product",{attrs:{value:t.product,"data-toggle":"collapse","data-target":"#to-office-stock-"+t.id,"aria-expanded":!0,"aria-controls":"to-office-stock-"+t.id}})],1)]),n("div",{staticClass:"collapse",attrs:{id:"to-office-stock-"+t.id,"aria-labelledby":"to-office-"+t.id,"data-parent":"#to-office"}},[n("div",{staticClass:"card-body"},[t.stocks.length?n("DataGrid",{attrs:{items:t.stocks,fields:{id:{display_name:"ID"},remaining_quantity:{display_name:"Cantidad Restante (m)",class:"text-right"}},field_configs:{order:["id","remaining_quantity"]},showDeleteButton:!1}}):e._e()],1)])])}),0)],1)]):e._e()])])]):e._e()},tt=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"card-title"},[n("h4",[e._v("Envios")])])}],nt=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("form",{attrs:{autocomplete:"off"},on:{submit:function(e){e.preventDefault()}}},[n("div",{staticClass:"form-group"},[n("div",{staticClass:"input-group"},[n("input",{staticClass:"form-control",attrs:{id:"search",type:"text",placeholder:"Buscar..."},domProps:{value:e.search},on:{keyup:e.onChange}})])])])},it=[],at={props:{changeHandler:{required:!0},search:{default:""}},methods:{onChange:function(e){this.changeHandler(e.target.value)}}},rt=at,st=Object(A["a"])(rt,nt,it,!1,null,null,null),ot=st.exports,ct={functional:!0,render:function(e,t){var n=t.props;return e("button",{class:n.selectedItems&&-1!=n.selectedItems.indexOf(n.item.id)?"btn btn-danger btn-sm":n.class,on:{click:function(){n.selectedItems&&-1!=n.selectedItems.indexOf(n.item.id)?n.unSelect(n.item):n.action(n.item,n.extraParams)}}},[n.selectedItems&&-1!=n.selectedItems.indexOf(n.item.id)?e("i",{class:"fas fa-arrow-left"}):e("div",[n.label," ",n.icon?e("i",{class:n.icon}):null])])}},lt={components:{FormGenerator:Te,DataGrid:Fe,Product:ae,SearchBox:ot},data:function(){return{Product:ae,AddStockButton:ct,is_saving:!1,is_deleting:!1,entity:null,item:{office_id:null,to_office_id:null,stocks:[]},roll:{yd_quantity:null,quantity:null},from_office_search:null,to_office_search:null,selectedItems:[]}},created:function(){this.setEntity("movimientos-almacen")},computed:Object(l["a"])({},Object(u["c"])("entities",["entityItems"]),Object(u["e"])("app",["selectedOffice"])),methods:{addStock:function(e,t){this.item.stocks.push(Object(l["a"])({},e,{product:t.product})),this.selectedItems.push(e.id)},removeStock:function(e){var t=this.selectedItems.indexOf(e.id),n=this.item.stocks.findIndex(function(t){return t.id==e.id});this.selectedItems.splice(t,1),this.item.stocks.splice(n,1)},debounceHandler:_.debounce(function(e,t){this[e](t)},600),searchHandler:function(e){var t=e.key,n=e.search;this[t]=n},submitHandler:function(){var e=Object(d["a"])(regeneratorRuntime.mark(function e(){var t,n,i,a;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(!this.is_saving){e.next=2;break}return e.abrupt("return");case 2:return this.is_saving=!0,e.next=5,Object(M["a"])({url:"/api/".concat(this.entity.url),data:this.item,method:"post"});case 5:t=e.sent,n=Object(m["a"])(t,2),i=n[0],a=n[1],i?console.log(i):(PNotify.success("Registro guardado con exito"),this.$router.replace("/movimientos-almacen/lista/".concat(a.data.id))),this.is_saving=!1;case 11:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),deleteHandler:function(){var e=Object(d["a"])(regeneratorRuntime.mark(function e(t){var n,i,a;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(!this.is_deleting){e.next=2;break}return e.abrupt("return");case 2:return this.is_deleting=!0,e.next=5,Object(M["a"])({url:"/api/".concat(this.entity.url,"/").concat(t),method:"delete"});case 5:n=e.sent,i=Object(m["a"])(n,1),a=i[0],a?console.log(a):this.$router.go(-1),this.is_deleting=!1;case 10:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}(),changeHandler:function(e,t){this.item[e]=t},setEntity:function(e){if(!be(e))return this.$router.replace("/");this.entity=_e(e),this.item.office_id=this.selectedOffice.id}}},dt=lt,ut=Object(A["a"])(dt,et,tt,!1,null,null,null),ft=ut.exports,pt=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.entity&&e.entityItem({entity:e.entity.url,id:e.$route.params.id})?n("div",{staticClass:"container-fluid"},[n("div",{staticClass:"card"},[n("div",{staticClass:"card-body"},[n("div",{staticClass:"card-title"},[n("h2",[e._v(e._s(e.entity.display_single_name)+" #"+e._s(e.entityItem({entity:e.entity.url,id:e.$route.params.id}).id))]),e.entityItem({entity:e.entity.url,id:e.$route.params.id}).updated_at?n("small",{staticClass:"text-muted"},[e._v("Ultima modificación: "+e._s(e.entityItem({entity:e.entity.url,id:e.$route.params.id}).updated_at))]):e._e()]),n("FormGenerator",{attrs:{item:e.entityItem({entity:e.entity.url,id:e.$route.params.id}),updatedItem:e.item,isUpdate:!0,fields:e.entity.fields,field_configs:e.entity.field_configurations.form,showDeleteButton:e.entity.field_configurations.form.showDeleteButton,submitHandler:e.submitHandler,changeHandler:e.changeHandler,deleteHandler:e.deleteHandler,saving:e.is_saving,deleting:e.is_deleting,cancel:function(){return e.$router.go(-1)}}})],1)]),n("div",{staticClass:"card"},[n("div",{staticClass:"card-body"},[e._m(0),e.entityItem({entity:e.entity.url,id:e.$route.params.id}).stocks.length?n("DataGrid",{attrs:{items:e.entityItem({entity:e.entity.url,id:e.$route.params.id}).stocks,fields:{id:{display_name:"ID"},"stock_detail.stock.product":{display_name:"Product",formatter:e.Product},"stock_detail.remaining_quantity":{display_name:"Cantidad (m)",class:"text-right"}},field_configs:{order:["id","stock_detail.stock.product","stock_detail.remaining_quantity"]},showDeleteButton:!0,clickHandler:function(){},deleteHandler:e.rollDeleteHandler}}):e._e()],1)])]):e._e()},mt=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"card-title"},[n("h4",[e._v("Envios")])])}],ht={components:{FormGenerator:Te,DataGrid:Fe},data:function(){return{Product:ae,is_saving:!1,is_deleting:!1,entity:null,item:{stocks:[]},roll:{yd_quantity:null,quantity:null}}},created:function(){this.setEntity("movimientos-almacen")},methods:{submitHandler:function(){var e=Object(d["a"])(regeneratorRuntime.mark(function e(){var t,n,i,a=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(!this.is_saving){e.next=2;break}return e.abrupt("return");case 2:if(v()(this.item).forEach(function(e){return a.item[e]==a.entityItem({entity:a.entity.url,id:a.$route.params.id})[e]?delete a.item[e]:""}),v()(this.item).length){e.next=5;break}return e.abrupt("return",PNotify.info("No hay ningun cambio a guardar"));case 5:return this.is_saving=!0,e.next=8,Object(M["a"])({url:"/api/".concat(this.entity.url,"/").concat(this.$route.params.id),data:this.item,method:"put"});case 8:t=e.sent,n=Object(m["a"])(t,1),i=n[0],i?console.log(i):PNotify.success("Registro guardado con exito"),this.is_saving=!1;case 13:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),deleteHandler:function(){var e=Object(d["a"])(regeneratorRuntime.mark(function e(t){var n,i,a;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(!this.is_deleting){e.next=2;break}return e.abrupt("return");case 2:return this.is_deleting=!0,e.next=5,Object(M["a"])({url:"/api/".concat(this.entity.url,"/").concat(t),method:"delete"});case 5:n=e.sent,i=Object(m["a"])(n,1),a=i[0],a?console.log(a):this.$router.go(-1),this.is_deleting=!1;case 10:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}(),rollDeleteHandler:function(){var e=Object(d["a"])(regeneratorRuntime.mark(function e(t){var n,i,a;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(!this.is_deleting){e.next=2;break}return e.abrupt("return");case 2:return this.is_deleting=!0,e.next=5,Object(M["a"])({url:"/api/stock_movement_details/".concat(t),method:"delete"});case 5:n=e.sent,i=Object(m["a"])(n,1),a=i[0],a&&console.log(a),this.is_deleting=!1;case 10:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}(),changeHandler:function(e,t){this.entityItem({entity:this.entity.url,id:this.$route.params.id})[e]!=t?this.item[e]=t:delete this.item[e]},setEntity:function(e){if(!be(e))return this.$router.replace("/");this.entity=_e(e)}},computed:Object(l["a"])({},Object(u["c"])("entities",["entityItem"]))},yt=ht,gt=Object(A["a"])(yt,pt,mt,!1,null,null,null),_t=gt.exports,bt=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.entity?n("div",{staticClass:"container-fluid"},[n("div",{staticClass:"card"},[n("div",{staticClass:"card-body"},[n("div",{staticClass:"card-title"},[n("h2",[e._v("\n          "+e._s(e.entity.display_name)+"\n          "),e.entity.field_configurations.list.showCreateButton?n("div",{staticClass:"float-right btn-group"},[n("router-link",{staticClass:"btn btn-success btn-sm",attrs:{to:"crear",append:""}},[n("i",{staticClass:"fas fa-plus"})])],1):e._e()]),n("SearchBox",{attrs:{changeHandler:function(t){return e.debounceHandler("searchHandler",t)},search:e.params.search}}),n("DataGrid",{attrs:{items:e.entityItems({entity:e.entity.url,params:Object.assign({},e.params,{office:e.selectedOffice})}),fields:e.entity.fields,field_configs:e.entity.field_configurations.list,showEditButton:e.entity.field_configurations.list.showEditButton,showDeleteButton:e.entity.field_configurations.list.showDeleteButton,deleteHandler:e.deleteHandler,deleting:e.deleting_id}})],1)])])]):e._e()},vt=[],wt={components:{DataGrid:Fe,SearchBox:ot},data:function(){return{params:{keys:[],search:""},is_deleting:!1,deleting_id:null,entity:null}},created:function(){this.setEntity(this.$route.params.entity)},methods:{deleteHandler:function(){var e=Object(d["a"])(regeneratorRuntime.mark(function e(t){var n,i,a;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(!this.is_deleting){e.next=2;break}return e.abrupt("return");case 2:return this.is_deleting=!0,this.deleting_id=t,e.next=6,Object(M["a"])({url:"/api/".concat(this.entity.url,"/").concat(t),method:"delete"});case 6:n=e.sent,i=Object(m["a"])(n,1),a=i[0],a&&console.log(a),this.is_deleting=!1;case 11:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}(),debounceHandler:_.debounce(function(e,t){this[e](t)},600),searchHandler:function(e){this.params.search=e},setEntity:function(e){if(!be(e))return this.$router.replace("/");this.entity=_e(e),this.deleting_id=null,this.params.keys=this.entity.field_configurations.list.order,this.params.search=""}},computed:Object(l["a"])({},Object(u["c"])("entities",["entityItems"]),Object(u["e"])("app",["selectedOffice"])),watch:{"$route.params.entity":function(e){this.setEntity(e)}}},kt=wt,Ot=Object(A["a"])(kt,bt,vt,!1,null,null,null),xt=Ot.exports,Ct=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.entity?n("div",{staticClass:"container-fluid"},[n("div",{staticClass:"card"},[n("div",{staticClass:"card-body"},[n("div",{staticClass:"card-title"},[n("h2",[e._v(e._s(e.entity.display_single_name))])]),n("FormGenerator",{attrs:{item:{},updatedItem:e.item,fields:e.entity.fields,field_configs:e.entity.field_configurations.form,submitHandler:e.submitHandler,changeHandler:e.changeHandler,saving:e.is_saving,cancel:function(){return e.$router.go(-1)}}})],1)])]):e._e()},jt=[],St={components:{FormGenerator:Te},data:function(){return{is_saving:!1,is_deleting:!1,entity:null,item:{}}},created:function(){this.setEntity(this.$route.params.entity)},methods:{submitHandler:function(){var e=Object(d["a"])(regeneratorRuntime.mark(function e(){var t,n,i,a;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(!this.is_saving){e.next=2;break}return e.abrupt("return");case 2:return this.is_saving=!0,e.next=5,Object(M["a"])({url:"/api/".concat(this.entity.url),data:this.item,method:"post"});case 5:t=e.sent,n=Object(m["a"])(t,2),i=n[0],a=n[1],i?console.log(i):(PNotify.success("Registro guardado con exito"),this.$router.replace("/".concat(this.$route.params.entity,"/lista/").concat(a.data.id))),this.is_saving=!1;case 11:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),deleteHandler:function(){var e=Object(d["a"])(regeneratorRuntime.mark(function e(t){var n,i,a;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(!this.is_deleting){e.next=2;break}return e.abrupt("return");case 2:return this.is_deleting=!0,e.next=5,Object(M["a"])({url:"/api/".concat(this.entity.url,"/").concat(t),method:"delete"});case 5:n=e.sent,i=Object(m["a"])(n,1),a=i[0],a?console.log(a):this.$router.go(-1),this.is_deleting=!1;case 10:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}(),changeHandler:function(e,t){this.item[e]=t},setEntity:function(e){if(!be(e))return this.$router.replace("/");this.entity=_e(e)}}},Ht=St,It=Object(A["a"])(Ht,Ct,jt,!1,null,null,null),qt=It.exports,Nt=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.entity&&e.entityItem({entity:e.entity.url,id:e.$route.params.id})?n("div",{staticClass:"container-fluid"},[n("div",{staticClass:"card"},[n("div",{staticClass:"card-body"},[n("div",{staticClass:"card-title"},[n("h2",[e._v(e._s(e.entity.display_single_name)+" #"+e._s(e.entityItem({entity:e.entity.url,id:e.$route.params.id}).id))]),e.entityItem({entity:e.entity.url,id:e.$route.params.id}).updated_at?n("small",{staticClass:"text-muted"},[e._v("Ultima modificación: "+e._s(e.entityItem({entity:e.entity.url,id:e.$route.params.id}).updated_at))]):e._e()]),n("FormGenerator",{attrs:{item:e.entityItem({entity:e.entity.url,id:e.$route.params.id}),updatedItem:e.item,isUpdate:!0,fields:e.entity.fields,field_configs:e.entity.field_configurations.form,showDeleteButton:e.entity.field_configurations.form.showDeleteButton,submitHandler:e.submitHandler,changeHandler:e.changeHandler,deleteHandler:e.deleteHandler,saving:e.is_saving,deleting:e.is_deleting,cancel:function(){return e.$router.go(-1)}}})],1)])]):e._e()},Dt=[],Bt={components:{FormGenerator:Te},data:function(){return{is_saving:!1,is_deleting:!1,entity:null,item:{}}},created:function(){this.setEntity(this.$route.params.entity)},methods:{submitHandler:function(){var e=Object(d["a"])(regeneratorRuntime.mark(function e(){var t,n,i,a=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(!this.is_saving){e.next=2;break}return e.abrupt("return");case 2:if(v()(this.item).forEach(function(e){return a.item[e]==a.entityItem({entity:a.entity.url,id:a.$route.params.id})[e]?delete a.item[e]:""}),v()(this.item).length){e.next=5;break}return e.abrupt("return",PNotify.info("No hay ningun cambio a guardar"));case 5:return this.is_saving=!0,e.next=8,Object(M["a"])({url:"/api/".concat(this.entity.url,"/").concat(this.$route.params.id),data:this.item,method:"put"});case 8:t=e.sent,n=Object(m["a"])(t,1),i=n[0],i?console.log(i):PNotify.success("Registro guardado con exito"),this.is_saving=!1;case 13:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),deleteHandler:function(){var e=Object(d["a"])(regeneratorRuntime.mark(function e(t){var n,i,a;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(!this.is_deleting){e.next=2;break}return e.abrupt("return");case 2:return this.is_deleting=!0,e.next=5,Object(M["a"])({url:"/api/".concat(this.entity.url,"/").concat(t),method:"delete"});case 5:n=e.sent,i=Object(m["a"])(n,1),a=i[0],a?console.log(a):this.$router.go(-1),this.is_deleting=!1;case 10:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}(),changeHandler:function(e,t){this.entityItem({entity:this.entity.url,id:this.$route.params.id})[e]!=t?this.item[e]=t:delete this.item[e]},setEntity:function(e){if(!be(e))return this.$router.replace("/");this.entity=_e(e)}},computed:Object(l["a"])({},Object(u["c"])("entities",["entityItem"]))},$t=Bt,Et=Object(A["a"])($t,Nt,Dt,!1,null,null,null),Rt=Et.exports;r["a"].use(s["a"]);var Pt={functional:!0,render:function(e){return e("router-view")}},Ut={functional:!0,render:function(e){return e("div")}},Mt=[{path:"/",component:$e,children:[{path:"",component:Ut},{path:"/home",component:Ut,display_name:"Inicio"},{path:"/notificaciones",redirect:"/notificaciones/lista",display_name:"Notificaciones"},{path:"/almacen",redirect:"/almacen/lista",display_name:"Almacen"},{path:"/movimientos-almacen",redirect:"/movimientos-almacen/lista",display_name:"Movimientos de Almacén"},{path:"/gestion",component:Pt,display_name:"Gestion",children:[{path:"/colores",redirect:"/colores/lista",display_name:"Colores"},{path:"/disenos",redirect:"/disenos/lista",display_name:"Diseños"},{path:"/telas",redirect:"/telas/lista",display_name:"Telas"},{path:"/modelos",redirect:"/modelos/lista",display_name:"Modelos"},{path:"/sucursales",redirect:"/sucursales/lista",display_name:"Sucursales"},{path:"/clientes",redirect:"/clientes/lista",display_name:"Clientes"},{path:"/proveedores",redirect:"/proveedores/lista",display_name:"Proveedores"},{path:"/usuarios",redirect:"/usuarios/lista",display_name:"Usuarios"}]},{path:"/:entity/lista",component:xt},{path:"/movimientos-almacen/lista/crear",component:ft},{path:"/movimientos-almacen/lista/:id",component:_t},{path:"/almacen/lista/crear",component:We},{path:"/almacen/lista/:id",component:Ze},{path:"/:entity/lista/crear",component:qt},{path:"/:entity/lista/:id",component:Rt}]},{path:"/login",name:"login",component:function(){return n.e("chunk-e5aee030").then(n.bind(null,"013f"))}},{path:"*",redirect:"/"}],Gt=new s["a"]({mode:"history",routes:Mt}),Tt=n("5176"),Lt=n.n(Tt),Ft=n("bd86"),At=Object(l["a"])({},ve()),Vt={entityItems:function(e){return function(t){var n=t.entity,i=t.params,a=void 0===i?{search:"",office:null}:i,r=e[n];return a.office&&"stocks"===n&&(r=r.filter(function(e){return e.office_id==a.office.id})),a.search?Object(M["b"])(r,a.search,a.keys):r}},entityItem:function(e){return function(t){var n=t.entity,i=t.id;return e[n].find(function(e){return e.id==i})}},getNotifications:function(e){return function(){return e.notifications.filter(function(e){return 1==e.status})}}},Jt={setNotifications:function(){var e=Object(d["a"])(regeneratorRuntime.mark(function e(t,n){var i,a;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:i=t.commit,a={},n.forEach(function(e){a[e.entity_id]||(a[e.entity_id]=[]),a[e.entity_id].push(e)}),n=[],v()(a).forEach(function(e){a[e].length>2?n.push(Object(l["a"])({},a[e][0],{type:2})):n=n.concat(a[e])}),n.forEach(function(){var e=Object(d["a"])(regeneratorRuntime.mark(function e(t){var n,a,r,s,o,c,l,d,u,f,p,h;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(1!=t.type){e.next=10;break}return e.next=3,Object(M["a"])({url:"/api/".concat(t.entity.name,"/").concat(t.entity_value_id)});case 3:n=e.sent,a=Object(m["a"])(n,2),r=a[0],s=a[1],r||i("onCreate",{entity:t.entity.name,createdValue:s}),e.next=31;break;case 10:if(2!=t.type){e.next=20;break}return e.next=13,Object(M["a"])({url:"/api/".concat(t.entity.name)});case 13:o=e.sent,c=Object(m["a"])(o,2),l=c[0],d=c[1],l||i("setInitialValues",Object(Ft["a"])({},t.entity.name,d)),e.next=31;break;case 20:if(3!=t.type){e.next=30;break}return e.next=23,Object(M["a"])({url:"/api/".concat(t.entity.name,"/").concat(t.entity_value_id)});case 23:u=e.sent,f=Object(m["a"])(u,2),p=f[0],h=f[1],p||i("onUpdate",{entity:t.entity.name,id:t.entity_value_id,updatedValue:h}),e.next=31;break;case 30:4==t.type&&i("onDelete",{entity:t.entity.name,id:t.entity_value_id});case 31:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}());case 6:case"end":return e.stop()}},e)}));function t(t,n){return e.apply(this,arguments)}return t}()},Wt={setInitialValues:function(e,t){var n=Lt()({},t);v()(n).forEach(function(t){return e[t]=n[t]})},onCreate:function(e,t){var n=t.entity,i=t.createdValue;e[n].push(i)},onUpdate:function(e,t){var n=t.entity,i=t.id,a=t.updatedValue,s=e[n].findIndex(function(e){return e.id==i});s>-1?r["a"].set(e[n],s,a):e[n].push(a)},onDelete:function(e,t){var n=t.entity,i=t.id,a=e[n].findIndex(function(e){return e.id==i});a>-1&&e[n].splice(a,1)}},zt={namespaced:!0,state:At,getters:Vt,actions:Jt,mutations:Wt},Xt={authenticated:localStorage.getItem("authenticated")?JSON.parse(localStorage.authenticated):null,user:localStorage.getItem("user")?JSON.parse(localStorage.user):null,user_id:localStorage.getItem("user_id")?JSON.parse(localStorage.user_id):null,token:localStorage.getItem("token")||null},Qt={},Kt={isAuthenticated:function(e){var t=e.state;return!!(t.authenticated&&t.user&&t.user_id&&t.token)},login:function(e,t){var n=e.commit,i=t.user,a=t.token,r=t.callback;n("login",{user:i,token:a}),r&&r()},logout:function(e,t){var n=e.commit,i=t.callback;n("logout"),i&&i()},setState:function(e,t){var n=e.commit;v()(t).forEach(function(e){n("setState",Object(Ft["a"])({},e,t[e]))})}},Yt={setState:function(e,t){Object(M["e"])(e,t)},login:function(e,t){var n=t.user,i=t.token;Object(M["e"])(e,{authenticated:!0,user_id:n.id,token:i,user:n})},logout:function(e){Object(M["e"])(e,{authenticated:!1,user_id:null,token:null,user:null}),localStorage.clear()}},Zt={namespaced:!0,state:Xt,getters:Qt,actions:Kt,mutations:Yt},en=function e(t){var n=[];return t.forEach(function(t){if(t.children&&t.display_name){var i=e(t.children);i.length&&n.push({name:t.display_name,children:i})}else if(t.display_name)n.push({to:t.path,name:t.display_name});else if(t.children){var a=e(t.children);a.length&&(n=n.concat(a))}}),n},tn={showSidebar:window.innerWidth>991,selectedOffice:{},menu:en(Mt)},nn={},an={selectOffice:function(e,t){var n=e.commit;n("selectOffice",t)},toggleSidebar:function(e){var t=e.commit;t("toggleSidebar")}},rn={selectOffice:function(e,t){e.selectedOffice=t},toggleSidebar:function(e){e.showSidebar=!e.showSidebar}},sn={namespaced:!0,state:tn,getters:nn,actions:an,mutations:rn};r["a"].use(u["a"]);var on={modules:{entities:zt,auth:Zt,app:sn}},cn=new u["a"].Store(on),ln=n("9483");Object(ln["a"])("".concat("/","service-worker.js"),{ready:function(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered:function(){console.log("Service worker has been registered.")},cached:function(){console.log("Content has been cached for offline use.")},updatefound:function(){console.log("New content is downloading.")},updated:function(){console.log("New content is available; please refresh.")},offline:function(){console.log("No internet connection found. App is running in offline mode.")},error:function(e){console.error("Error during service worker registration:",e)}}),r["a"].config.productionTip=!1,new r["a"]({router:Gt,store:cn,render:function(){var e=arguments[0];return e("router-view")}}).$mount("#app")},"59f2":function(e,t,n){"use strict";var i=n("d5a0"),a=n.n(i);a.a},"7e6a":function(e,t,n){},"8d1b":function(e,t,n){e.exports=n.p+"img/logo-144.74ea420c.png"},bc17:function(e,t,n){},c6e2:function(e,t,n){"use strict";var i=n("0488"),a=n.n(i);a.a},d5a0:function(e,t,n){},ed08:function(e,t,n){"use strict";n.d(t,"a",function(){return f}),n.d(t,"e",function(){return p}),n.d(t,"d",function(){return m}),n.d(t,"c",function(){return h}),n.d(t,"b",function(){return y});n("6762"),n("2fdb"),n("28a5");var i=n("f499"),a=n.n(i),r=n("5176"),s=n.n(r),o=n("7618"),c=n("a4bb"),l=n.n(c),d=(n("ac6a"),n("cadf"),n("551c"),n("f751"),n("097d"),0),u=!1,f=function e(t){var n=t.method,i=void 0===n?"get":n,a=t.url,r=t.data,s=void 0===r?{}:r,o=t.params,c=void 0===o?null:o;return axios({method:i,url:a,data:s,params:c}).then(function(e){return u&&(u=!1,PNotify.success("Conexiòn restablecida")),[null,e.data]}).catch(function(t){if(t.response){var n=t.response.status;if(d<3&&500==n)return d++,e({method:i,url:a,data:s,params:c});d=0}else u=!0,PNotify.error("Ocurrio un problema en la red... Reintenta en unos segundos");return[t]})},p=function(e,t){l()(t).forEach(function(n){"object"===Object(o["a"])(t[n])?(e[n]=s()({},t[n]),localStorage[n]=a()(t[n])):(e[n]=t[n],localStorage[n]=t[n])})},m=function e(t,n){if(t[n])return n;if(-1!=n.indexOf(".")){var i=n.split(".").length,a=n.split(".");return a.splice(i-1,1).join("."),e(t,a.join("."))}},h=function e(t,n,i){var r="";if(i){var s=m(t,i.join("."));if(s)return a()(t[s])}var c=n[0];if("object"===Object(o["a"])(t[c])&&null!==t[c]&&n.length>1){var l=n.slice(1);l&&(r=e(t[c],l))}else r=t[c];return r},y=function(e,t,n){var i=t.toLowerCase();return e.filter(function(e){return n.some(function(t){return-1!==t.indexOf(".")?String(h(e,t.split("."),t.split("."))).toLowerCase().includes(i):null!==e[t]&&String(e[t]).toLowerCase().includes(i)})})}}});
//# sourceMappingURL=app.f2e49ae7.js.map