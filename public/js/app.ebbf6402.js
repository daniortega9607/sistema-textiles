(function(e){function t(t){for(var i,r,o=t[0],l=t[1],d=t[2],c=0,u=[];c<o.length;c++)r=o[c],a[r]&&u.push(a[r][0]),a[r]=0;for(i in l)Object.prototype.hasOwnProperty.call(l,i)&&(e[i]=l[i]);p&&p(t);while(u.length)u.shift()();return s.push.apply(s,d||[]),n()}function n(){for(var e,t=0;t<s.length;t++){for(var n=s[t],i=!0,r=1;r<n.length;r++){var o=n[r];0!==a[o]&&(i=!1)}i&&(s.splice(t--,1),e=l(l.s=n[0]))}return e}var i={},r={app:0},a={app:0},s=[];function o(e){return l.p+"js/"+({}[e]||e)+"."+{"chunk-37a22b8e":"e5c325bb"}[e]+".js"}function l(t){if(i[t])return i[t].exports;var n=i[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,l),n.l=!0,n.exports}l.e=function(e){var t=[],n={"chunk-37a22b8e":1};r[e]?t.push(r[e]):0!==r[e]&&n[e]&&t.push(r[e]=new Promise(function(t,n){for(var i="css/"+({}[e]||e)+"."+{"chunk-37a22b8e":"0dbfe6ce"}[e]+".css",a=l.p+i,s=document.getElementsByTagName("link"),o=0;o<s.length;o++){var d=s[o],c=d.getAttribute("data-href")||d.getAttribute("href");if("stylesheet"===d.rel&&(c===i||c===a))return t()}var u=document.getElementsByTagName("style");for(o=0;o<u.length;o++){d=u[o],c=d.getAttribute("data-href");if(c===i||c===a)return t()}var p=document.createElement("link");p.rel="stylesheet",p.type="text/css",p.onload=t,p.onerror=function(t){var i=t&&t.target&&t.target.src||a,s=new Error("Loading CSS chunk "+e+" failed.\n("+i+")");s.request=i,delete r[e],p.parentNode.removeChild(p),n(s)},p.href=a;var f=document.getElementsByTagName("head")[0];f.appendChild(p)}).then(function(){r[e]=0}));var i=a[e];if(0!==i)if(i)t.push(i[2]);else{var s=new Promise(function(t,n){i=a[e]=[t,n]});t.push(i[2]=s);var d,c=document.createElement("script");c.charset="utf-8",c.timeout=120,l.nc&&c.setAttribute("nonce",l.nc),c.src=o(e),d=function(t){c.onerror=c.onload=null,clearTimeout(u);var n=a[e];if(0!==n){if(n){var i=t&&("load"===t.type?"missing":t.type),r=t&&t.target&&t.target.src,s=new Error("Loading chunk "+e+" failed.\n("+i+": "+r+")");s.type=i,s.request=r,n[1](s)}a[e]=void 0}};var u=setTimeout(function(){d({type:"timeout",target:c})},12e4);c.onerror=c.onload=d,document.head.appendChild(c)}return Promise.all(t)},l.m=e,l.c=i,l.d=function(e,t,n){l.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},l.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},l.t=function(e,t){if(1&t&&(e=l(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(l.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)l.d(n,i,function(t){return e[t]}.bind(null,i));return n},l.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return l.d(t,"a",t),t},l.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},l.p="/",l.oe=function(e){throw console.error(e),e};var d=window["webpackJsonp"]=window["webpackJsonp"]||[],c=d.push.bind(d);d.push=t,d=d.slice();for(var u=0;u<d.length;u++)t(d[u]);var p=c;s.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"32e8":function(e,t,n){"use strict";var i=n("d507"),r=n.n(i);r.a},"4bae":function(e,t,n){"use strict";var i=n("aa80"),r=n.n(i);r.a},"56d7":function(e,t,n){"use strict";n.r(t);n("cadf"),n("551c"),n("f751"),n("097d"),n("7e6a");var i=n("5c15");n("3756"),n("8aa8"),n("ed9c");i["a"].defaults.styling="bootstrap4",i["a"].defaults.icons="fontawesome5",window.PNotify=i["a"],window._=n("2ef0");try{window.Popper=n("f0bd").default,window.$=window.jQuery=n("1157"),n("4989")}catch(Gt){}window.axios=n("bc3a"),window.axios.defaults.headers.common["X-Requested-With"]="XMLHttpRequest";var r,a=n("2b0e"),s=n("8c4f"),o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.authenticated?n("div",{class:{"show-sidebar":e.showSidebar,"h-100":!0}},[n("MainNavbar",{attrs:{user:e.user,handleLogout:e.handleLogout}}),n("Sidebar",{attrs:{user:e.user,handleLogout:e.handleLogout,showSidebar:e.showSidebar,menu:e.menu}}),n("main",{staticClass:"h-100",attrs:{id:"content-wrapper"}},[n("div",{staticClass:"py-4"},[n("router-view",{attrs:{id:"main-wrapper"}})],1)])],1):e._e()},l=[],d=(n("a481"),n("cebc")),c=(n("96cf"),n("3b8d")),u=n("2f62"),p=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("nav",{staticClass:"navbar navbar-expand-md navbar-light navbar-laravel fixed-top"},[i("div",{staticClass:"container-fluid"},[i("router-link",{staticClass:"navbar-brand",attrs:{to:{path:"/"}}},[e._v("\n      Textiles Hernandez\n      "),i("img",{staticClass:"logo",attrs:{src:n("8d1b"),alt:"Logo"}})]),i("button",{staticClass:"navbar-toggler",attrs:{type:"button"},on:{click:e.toggleSidebar}},[i("span",{staticClass:"navbar-toggler-icon"})]),i("div",{staticClass:"collapse navbar-collapse",attrs:{id:"navbarSupportedContent"}},[i("div",{staticClass:"navbar-nav mr-auto"},[i("div",{staticClass:"btn-group",attrs:{role:"group"}},[i("button",{staticClass:"btn btn-secondary",on:{click:e.toggleSidebar}},[i("i",{staticClass:"fas fa-bars"})]),i("button",{staticClass:"btn btn-dark",on:{click:function(){return e.$router.go(-1)}}},[i("i",{staticClass:"fas fa-arrow-left"})]),e.offices.length>1?i("div",{staticClass:"dropdown"},[i("a",{staticClass:"btn dropdown-toggle btn-light",attrs:{href:"#",role:"button",id:"navbarOffices","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"}},[e._v(e._s(e.selectedOffice.name||"Sucursales"))]),i("div",{staticClass:"dropdown-menu",attrs:{"aria-labelledby":"navbarOffices"}},e._l(e.offices,function(t){return i("button",{key:"office-list-"+t.id,staticClass:"dropdown-item pointer",class:{active:e.selectedOffice.id==t.id},on:{click:function(n){return e.selectOffice(t)}}},[e._v(e._s(t.name))])}),0)]):e._e()])]),i("div",{staticClass:"navbar-nav ml-auto"},[i("div",{staticClass:"dropdown"},[i("a",{staticClass:"btn dropdown-toggle text-dark",attrs:{href:"#",role:"button",id:"dropdownMenuLink","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"}},[e._v("Hola, "+e._s(e.user.name))]),i("div",{staticClass:"dropdown-menu",attrs:{"aria-labelledby":"dropdownMenuLink"}},[i("router-link",{staticClass:"dropdown-item",attrs:{to:{path:"/ajustes"}}},[e._v("Ajustes")]),i("button",{staticClass:"dropdown-item pointer",on:{click:e.handleLogout}},[e._v("Cerrar Sesion")])],1)])])])],1)])},f=[],m={props:{user:{required:!0},handleLogout:{required:!0}},methods:Object(d["a"])({},Object(u["b"])("app",["toggleSidebar","selectOffice"])),computed:Object(d["a"])({},Object(u["e"])("app",["selectedOffice"]),Object(u["e"])("entities",["offices"])),watch:{offices:function(e,t){e.length&&!t.length&&this.selectOffice(this.offices[0])}}},h=m,y=(n("4bae"),n("2877")),g=Object(y["a"])(h,p,f,!1,null,"4c8b8887",null),b=g.exports,v=(n("7f7f"),n("bc17"),{props:{item:{required:!0}},data:function(){return{show:!1}},methods:Object(d["a"])({toggleChildrenMenu:function(){this.show=!this.show},shouldToggleSidebar:function(){window.innerWidth<992&&this.toggleSidebar()}},Object(u["b"])("app",["toggleSidebar"])),render:function(e){return this.item.children?e("div",[e("a",{class:"nav-link pointer",on:{click:this.toggleChildrenMenu}},[this.item.name,this.show?e("i",{class:"fas fa-arrow-up float-right"}):e("i",{class:"fas fa-arrow-down float-right"})]),this.show?this.item.children.map(function(t){return e(v,{attrs:{item:t},class:"pl-5"})}):null]):e("router-link",{attrs:{to:this.item.to},class:"nav-link",nativeOn:{click:this.shouldToggleSidebar}},[this.item.name])}}),w={functional:!0,render:function(e,t){var n=t.props;return n.offices.map(function(t){return e("button",{class:{"dropdown-item":!0,pointer:!0},on:{click:function(){return n.clickHandler(t)}}},[t.name])})}},O={props:{user:{required:!0},handleLogout:{required:!0},showSidebar:{default:!1},menu:{default:function(){return[]}}},computed:Object(d["a"])({},Object(u["e"])("app",["selectedOffice"]),Object(u["e"])("entities",["offices"])),methods:Object(d["a"])({},Object(u["b"])("app",["selectOffice"])),render:function(e){return e("div",{attrs:{id:"sidebar-wrapper"},class:{"show-sidebar":this.showSidebar}},[e("div",{class:"h-100 sidebar-component"},[e("nav",{class:"nav flex-column"},[this.offices.length>1?e("div",{class:"dropdown"},[e("a",{class:"dropdown-toggle nav-link d-block d-md-none",attrs:{href:"#",role:"button",id:"sidebarOffices","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"}},[this.selectedOffice.name||"Sucursales"]),e("div",{class:"dropdown-menu",attrs:{"aria-labelledby":"sidebarOffices"}},[e(w,{attrs:{offices:this.offices,clickHandler:this.selectOffice}})])]):null,this.menu.map(function(t){return e(v,{attrs:{item:t}})}),e("a",{class:"nav-link",on:{click:this.handleLogout}},["Cerrar Sesión",e("i",{class:"fas fa-sign-out-alt float-right"})])])])])}},x=O,k=3,C=5,j={components:{MainNavbar:b,Sidebar:x},data:function(){return{last_event_id:null}},created:function(){var e=Object(c["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.isAuthenticated();case 2:if(e.sent){e.next=6;break}this.handleLogout(),e.next=7;break;case 6:this.setupStream();case 7:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),computed:Object(d["a"])({},Object(u["e"])("auth",["authenticated","user"]),Object(u["e"])("app",["showSidebar","menu"])),methods:Object(d["a"])({redirectToLogin:function(){this.$router.replace("/login")},handleLogout:function(){this.logout({callback:this.redirectToLogin})},setupStream:function(){var e=this;r=new EventSource("/api/notification_events/subscribe?".concat(this.last_event_id?"last_event_id="+this.last_event_id:"")),r.addEventListener("open",function(e){3!==k&&(k=3,C=5,PNotify.success("Conexión reestablecida"))},!1),r.addEventListener("initValues",function(t){var n=JSON.parse(t.data);e.last_event_id=t.lastEventId,e.setInitialValues(n)},!1),r.addEventListener("notification",function(t){var n=JSON.parse(t.data);e.last_event_id=t.lastEventId,e.setNotifications(n)},!1),r.addEventListener("error",function(t){t.target.close(),k>0?(k--,setTimeout(function(){C*=2,e.setupStream()},1e3*C),PNotify.error({title:"Error de Red",text:"Hay un error con su conexion, intentando restablecer en ".concat(C," segundos")})):PNotify.error({title:"Error de Red",text:"No se ha podido reestablecer la conexion. Verifique su conexion a internet e intente de nuevo",hide:!1,modules:{Confirm:{confirm:!0,buttons:[{text:"Reintentar",click:function(t){e.setupStream(),t.update({hide:!0})}}]},Buttons:{closer:!1,sticker:!1}}})},!1)},closeStream:function(){r.close()}},Object(u["d"])("entities",["setInitialValues"]),Object(u["b"])("entities",["setNotifications"]),Object(u["b"])("auth",["isAuthenticated","logout"])),beforeDestroy:function(){r&&(r.close(),r=null)}},S=j,q=(n("32e8"),Object(y["a"])(S,o,l,!1,null,"017ed5ee",null)),H=q.exports,D=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.entity?n("div",{staticClass:"container-fluid"},[n("div",{staticClass:"card"},[n("div",{staticClass:"card-body"},[n("div",{staticClass:"card-title"},[n("h2",[e._v(e._s(e.entity.display_single_name))])]),n("FormGenerator",{attrs:{item:{},updatedItem:e.item,fields:e.entity.fields,field_configs:e.entity.field_configurations.form,submitHandler:e.submitHandler,changeHandler:e.changeHandler,saving:e.is_saving,cancel:function(){return e.$router.go(-1)}}})],1)]),n("div",{staticClass:"card"},[n("div",{staticClass:"card-body"},[n("div",{staticClass:"card-title"},[n("h2",[e._v("Rollos")]),n("FormGenerator",{attrs:{item:{},updatedItem:e.roll,fields:{yd_quantity:{display_name:"Cantidad (yd)",render_type:"number"},quantity:{required:!0,display_name:"Cantidad (m)",render_type:"number"}},field_configs:{order:["yd_quantity","quantity"]},submitHandler:e.rollSubmitHandler,changeHandler:e.rollChangeHandler,hideCancel:!0}}),e.item.stocks.length?n("DataGrid",{attrs:{items:e.item.stocks,fields:{id:{display_name:"ID"},quantity:{display_name:"Cantidad (m)",class:"text-right"}},field_configs:{order:["id","quantity"]},showDeleteButton:!0,deleteHandler:e.rollDeleteHandler}}):e._e()],1)])])]):e._e()},N=[],I=(n("20d6"),n("768b")),B=n("59ad"),E=n.n(B),$=n("a4bb"),R=n.n($),P=(n("ac6a"),n("c5f6"),{name:"Office",store_entity:!0,display_name:"Sucursales",display_single_name:"Sucursal",url:"offices",field_configurations:{form:{order:["name","address","phone"],showDeleteButton:!0},list:{order:["id","name","address","phone"],showCreateButton:!0,showEditButton:!0,showDeleteButton:!0}},fields:{id:{type:Number,is_primary:!0,auto_generated:!0,display_name:"ID"},name:{type:String,display_name:"Nombre",required:!0,render_type:"text"},address:{type:String,display_name:"Dirección",render_type:"text"},phone:{type:String,display_name:"Teléfono",render_type:"text"}}}),U=P,L={functional:!0,render:function(e,t){var n=t.props;return e("div",{class:"color-box",style:{background:n.value}})}},M=L,T={name:"Color",store_entity:!0,display_name:"Colores",display_single_name:"Color",url:"colors",field_configurations:{form:{order:["name","value"],showDeleteButton:!0},list:{order:["id","name","value"],showCreateButton:!0,showEditButton:!0,showDeleteButton:!0}},fields:{id:{type:Number,is_primary:!0,auto_generated:!0,display_name:"ID"},name:{type:String,display_name:"Nombre",required:!0,render_type:"text"},value:{type:String,display_name:"Color",default:"#000000",formatter:M,render_type:"color",class:"text-center"}}},A=T,F={name:"Design",store_entity:!0,display_name:"Diseños",display_single_name:"Diseño",url:"designs",field_configurations:{form:{order:["name"],showDeleteButton:!0},list:{order:["id","name"],showCreateButton:!0,showEditButton:!0,showDeleteButton:!0}},fields:{id:{type:Number,is_primary:!0,auto_generated:!0,display_name:"ID"},name:{type:String,display_name:"Nombre",required:!0,render_type:"text"}}},G=F,V=n("e814"),J=n.n(V),W=(n("6b54"),function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:".",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:",";try{t=Math.abs(t),t=isNaN(t)?2:t;var r=e<0?"-":"",a=J()(e=Math.abs(Number(e)||0).toFixed(t)).toString(),s=a.length>3?a.length%3:0;return r+(s?a.substr(0,s)+i:"")+a.substr(s).replace(/(\d{3})(?=\d)/g,"$1"+i)+(t?n+Math.abs(e-a).toFixed(t).slice(2):"")}catch(Gt){console.log(Gt)}}),X=W,z={functional:!0,render:function(e,t){var n=t.props;return e("div",[n.value?"$"+X(n.value):""])}},Q=z,K={name:"Fabric",store_entity:!0,display_name:"Telas",display_single_name:"Tela",url:"fabrics",field_configurations:{form:{order:["name","buy_price","sell_price"],showDeleteButton:!0},list:{order:["id","name","buy_price","sell_price"],showCreateButton:!0,showEditButton:!0,showDeleteButton:!0}},fields:{id:{type:Number,is_primary:!0,auto_generated:!0,display_name:"ID"},name:{type:String,display_name:"Nombre",required:!0,render_type:"text"},buy_price:{type:String,display_name:"Precio de Compra",formatter:Q,class:"text-right",render_type:"number"},sell_price:{type:String,display_name:"Precio de Venta",formatter:Q,class:"text-right",render_type:"number"}}},Y=K,Z=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("input",{staticClass:"form-control",attrs:{id:e.id,type:"text",required:e.required,disabled:e.disabled},domProps:{value:e.search},on:{input:e.onChange}}),e.value?e._e():n("div",{staticClass:"search-list"},[n("div",{staticClass:"list-group"},e._l(e.results,function(t){return n("div",{key:"item-"+e.entity+"-"+t.id,staticClass:"list-group-item p-2",on:{click:function(n){return e.selectItem(t.id,t.value)}}},[e.customRenderer?n("CustomRenderer",{attrs:{value:t,renderer:e.customRenderer}}):n("b",[e._v(e._s(t.value))])],1)}),0)])])},ee=[],te=(n("386d"),n("ed08")),ne={functional:!0,render:function(e,t){var n=t.props;return e(n.renderer,{props:Object(d["a"])({},n)})}},ie=ne,re={components:{CustomRenderer:ie},props:{id:{required:!0},disabled:{default:!1},entity:{required:!0},required:{default:!1},changeHandler:{required:!0},currentValue:{default:""},customRenderer:{default:null}},data:function(){return{search:"",value:null,results:[]}},created:function(){var e=Object(c["a"])(regeneratorRuntime.mark(function e(){var t,n,i,r;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(!this.currentValue){e.next=8;break}return e.next=3,Object(te["a"])({url:"/api/".concat(this.entity,"/search"),params:{id:this.currentValue}});case 3:t=e.sent,n=Object(I["a"])(t,2),i=n[0],r=n[1],i||this.selectItem(r.id,r.value);case 8:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),methods:{debounceHandler:_.debounce(function(e,t){this[e](t)},600),onChange:function(e){this.search=e.target.value,this.debounceHandler("getItems",this.search)},selectItem:function(e,t){this.search=t,this.value=e,this.changeHandler(this.id,e)},getItems:function(){var e=Object(c["a"])(regeneratorRuntime.mark(function e(t){var n,i,r,a;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(this,this.value=null,this.results=[],t){e.next=6;break}return this.changeHandler(this.id,null),e.abrupt("return");case 6:return e.next=8,Object(te["a"])({url:"/api/".concat(this.entity,"/search"),params:{search:t}});case 8:n=e.sent,i=Object(I["a"])(n,2),r=i[0],a=i[1],r||(this.results=a);case 13:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}()}},ae=re,se=Object(y["a"])(ae,Z,ee,!1,null,null,null),oe=se.exports,le={name:"Product",store_entity:!0,display_name:"Modelos",display_single_name:"Modelo",url:"products",field_configurations:{form:{order:["sku","fabric_id","design_id","color_id"],showDeleteButton:!0},list:{order:["id","sku","fabric.name","design.name","color.value"],showCreateButton:!0,showEditButton:!0,showDeleteButton:!0}},fields:{id:{type:Number,is_primary:!0,auto_generated:!0,display_name:"ID"},sku:{type:String,display_name:"Codigo",required:!0,render_type:"text"},image:{type:String,display_name:"Imagen"},fabric:{type:Object,display_name:"Tela",required:!0},fabric_id:{type:Number,display_name:"Tela",required:!0,render_type:"custom",renderer:oe,props:{entity:"fabrics"}},design:{type:Object,display_name:"Diseño"},design_id:{type:Number,display_name:"Diseño",render_type:"custom",renderer:oe,props:{entity:"designs"}},color:{type:Object,display_name:"Color",formatter:M},color_id:{type:Number,display_name:"Color",render_type:"custom",renderer:oe,props:{entity:"colors"}}}},de=le,ce={name:"Supplier",store_entity:!0,display_name:"Proveedores",display_single_name:"Proveedor",url:"suppliers",field_configurations:{form:{order:["name","address","phone","mobilephone","email","credit_days","comments"],showDeleteButton:!0},list:{order:["id","name","address","phone","mobilephone","email","credit_days","comments"],showCreateButton:!0,showEditButton:!0,showDeleteButton:!0}},fields:{id:{type:Number,is_primary:!0,auto_generated:!0,display_name:"ID"},name:{type:String,display_name:"Nombre",required:!0,render_type:"text"},address:{type:String,display_name:"Dirección",render_type:"text"},phone:{type:String,display_name:"Teléfono",render_type:"text"},mobilephone:{type:String,display_name:"Celular",render_type:"text"},email:{type:String,display_name:"Correo",render_type:"email"},credit_days:{type:Number,display_name:"Dias de crédito",render_type:"number"},comments:{type:String,display_name:"Observaciones",render_type:"textarea"}}},ue=ce,pe={name:"Customer",store_entity:!0,display_name:"Clientes",display_single_name:"Cliente",url:"customers",field_configurations:{form:{order:["name","address","phone","mobilephone","email","credit_days","comments"],showDeleteButton:!0},list:{order:["id","name","address","phone","mobilephone","email","credit_days","comments"],showCreateButton:!0,showEditButton:!0,showDeleteButton:!0}},fields:{id:{type:Number,is_primary:!0,auto_generated:!0,display_name:"ID"},name:{type:String,display_name:"Nombre",required:!0,render_type:"text"},address:{type:String,display_name:"Dirección",render_type:"text"},phone:{type:String,display_name:"Teléfono",render_type:"text"},mobilephone:{type:String,display_name:"Celular",render_type:"text"},email:{type:String,display_name:"Correo",render_type:"email"},credit_days:{type:Number,display_name:"Dias de crédito",render_type:"number"},comments:{type:String,display_name:"Observaciones",render_type:"textarea"}}},fe=pe,me=(n("7514"),[{id:1,value:"Administrador"},{id:2,value:"Vendedor"},{id:3,value:"Cliente"}]),he={functional:!0,render:function(e,t){var n=t.props;return e("div",[me.find(function(e){return e.id==n.value}).value])}},ye={name:"User",store_entity:!0,display_name:"Usuarios",display_single_name:"Usuario",url:"users",field_configurations:{form:{order:["name","email","password","c_password","user_type","customer_id"],showDeleteButton:!0},list:{order:["id","name","email","user_type","customer.name"],showCreateButton:!0,showEditButton:!0,showDeleteButton:!0}},fields:{id:{type:Number,is_primary:!0,auto_generated:!0,display_name:"ID"},name:{type:String,display_name:"Nombre",required:!0,render_type:"text"},email:{type:String,display_name:"Correo",required:!0,render_type:"email"},password:{type:String,display_name:"Contraseña",required:!0,render_type:"password",hideOnUpdate:!0},c_password:{type:String,display_name:"Confirmar Contraseña",required:!0,render_type:"password",hideOnUpdate:!0},user_type:{type:Number,display_name:"Tipo de Usuario",required:!0,formatter:he,class:"text-center",render_type:"select",props:{values:me}},customer:{type:Object,display_name:"Cliente"},customer_id:{type:Number,display_name:"Cliente",render_type:"custom",renderer:oe,props:{entity:"customers"},hideOnUpdate:!0}}},ge=ye,be={functional:!0,render:function(e,t){var n=t.props;return e("div",[n.value.sku," ",n.value.fabric.name," ",n.value.design?n.value.design.name:"",n.value.color?e(M,{attrs:{value:n.value.color.value}}):null])}},_e=be,ve={functional:!0,render:function(e,t){var n=t.props;return e("div",[n.value.value?e(M,{attrs:{value:n.value.value}}):null])}},we=ve,Oe={name:"Stock",store_entity:!0,display_name:"Almacen",display_single_name:"Almacen",url:"stocks",field_configurations:{form:{order:["office_id","product_id","stock"]},list:{order:["id","office.name","product.sku","product.fabric.name","product.design.name","product.color","stock"],showCreateButton:!0,showEditButton:!0}},fields:{id:{type:Number,is_primary:!0,auto_generated:!0,display_name:"ID"},office:{type:Object,display_name:"Sucursal"},office_id:{type:Number,display_name:"Sucursal",render_type:"custom",disableOnUpdate:!0,renderer:oe,props:{entity:"offices"},required:!0},product:{type:Object,display_name:"Modelo"},product_id:{type:Number,display_name:"Modelo",render_type:"custom",disableOnUpdate:!0,renderer:oe,props:{entity:"products",customRenderer:_e},required:!0},"product.fabric":{display_name:"Tela"},"product.design":{display_name:"Diseño"},"product.color":{display_name:"Color",class:"text-center",formatter:we},stock:{type:String,display_name:"Cantidad (m)",class:"text-right",render_type:"number",disable:!0,default:0}}},xe=Oe,ke=[{id:1,value:"Cancelado"},{id:2,value:"Pendiente"},{id:3,value:"Completado"}],Ce={functional:!0,render:function(e,t){var n=t.props;return e("div",[ke.find(function(e){return e.id==n.value}).value])}},je={name:"StockMovement",store_entity:!0,display_name:"Movimientos de Almacén",display_single_name:"Movimiento de Almacén",url:"stock_movements",field_configurations:{form:{order:["office_id","to_office_id"],showDeleteButton:!0},list:{order:["id","created_at","office.name","to_office.name","status","balance","total"],showCreateButton:!0,showEditButton:!0,showDeleteButton:!0}},fields:{id:{type:Number,is_primary:!0,auto_generated:!0,display_name:"ID"},created_at:{type:String,display_name:"Fecha"},office:{type:Object,display_name:"Desde Sucursal"},office_id:{type:Number,display_name:"Desde Sucursal",render_type:"custom",disableOnUpdate:!0,renderer:oe,props:{entity:"offices"},required:!0},to_office:{type:Object,display_name:"Hacia Sucursal"},to_office_id:{type:Number,display_name:"Hacia Sucursal",render_type:"custom",disableOnUpdate:!0,renderer:oe,props:{entity:"offices"},required:!0},status:{type:Number,display_name:"Estado",required:!0,formatter:Ce,class:"text-center",render_type:"select",props:{values:ke}},balance:{type:Number,display_name:"Saldo",formatter:Q,class:"text-right",render_type:"number"},total:{type:Number,display_name:"Total",formatter:Q,class:"text-right",render_type:"number"}}},Se=je,qe={Office:U,Color:A,Design:G,Fabric:Y,Product:de,Supplier:ue,Customer:fe,User:ge,Stock:xe,StockMovement:Se},He={sucursales:"Office",colores:"Color",disenos:"Design",telas:"Fabric",modelos:"Product",clientes:"Customer",proveedores:"Supplier",usuarios:"User",almacen:"Stock","movimientos-almacen":"StockMovement"},De=function(e){return qe[e]||qe[He[e]]},Ne=function(e){return!!qe[e]||!!qe[He[e]]},Ie=function(){var e={};return R()(qe).forEach(function(t){qe[t].store_entity&&(e[qe[t].url]=[])}),e},Be=(n("28a5"),{functional:!0,render:function(e,t){var n=t.props;switch(n.field.render_type){case"text":case"password":case"email":case"number":return e("input",{attrs:{id:n.field.id,type:n.field.render_type,autofocus:n.field.autofocus,required:n.field.required,placeholder:n.field.placeholder,step:"any",disabled:n.field.disable||n.isUpdate&&n.field.disableOnUpdate},class:"form-control",domProps:{value:n.field.value},on:{input:function(e){return n.changeHandler(n.field.id,e.target.value)}}});case"color":return e("input",{attrs:{id:n.field.id,type:n.field.render_type,autofocus:n.field.autofocus,required:n.field.required,disabled:n.field.disable||n.isUpdate&&n.field.disableOnUpdate},class:"form-control",domProps:{value:n.field.value},on:{change:function(e){return n.changeHandler(n.field.id,e.target.value)}}});case"textarea":return e("textarea",{attrs:{id:n.field.id,autofocus:n.field.autofocus,required:n.field.required,rows:"3",disabled:n.field.disable||n.isUpdate&&n.field.disableOnUpdate},class:"form-control",domProps:{value:n.field.value},on:{change:function(e){return n.changeHandler(n.field.id,e.target.value)}}});case"select":return e("select",{attrs:{id:n.field.id,autofocus:n.field.autofocus,required:n.field.required,disabled:n.field.disable||n.isUpdate&&n.field.disableOnUpdate},class:"form-control",domProps:{value:n.field.value},on:{change:function(e){return n.changeHandler(n.field.id,e.target.value)}}},[e("option",{attrs:{value:""}},["Selecciona una opción"]),n.field.props.values.map(function(t){return e("option",{domProps:{value:t.id}},[t.value])})]);case"checkbox":return e("div",{class:"form-check"},[e("label",{class:"form-check-label"},[e("input",{attrs:{id:n.field.id,type:"checkbox",required:n.field.required,disabled:n.field.disable||n.isUpdate&&n.field.disableOnUpdate},class:"form-check-input",domProps:{checked:n.field.value},on:{change:function(e){return n.changeHandler(n.field.id,e.target.checked)}}}),n.field.props.label])]);case"custom":return e(n.field.renderer,{attrs:{id:n.field.id,currentValue:n.field.value,required:n.field.required,changeHandler:n.changeHandler,disabled:n.field.disable||n.isUpdate&&n.field.disableOnUpdate},props:Object(d["a"])({},n.field.props)});default:return null}}}),Ee={functional:!0,render:function(e,t){var n=t.props;return e("form",{on:{submit:function(e){e.preventDefault(),n.submitHandler()}},attrs:{autocomplete:"off"}},[n.field_configs?n.field_configs.order.map(function(t){return n.isUpdate&&n.fields[t.split(".")[0]].hideOnUpdate?null:(n.updatedItem[t]||n.item[t]||void 0===n.fields[t.split(".")[0]].default||n.changeHandler(t,n.fields[t.split(".")[0]].default),e("div",{class:"form-group"},[e("label",{attrs:{for:t}},[n.fields[t.split(".")[0]].display_name]),e(Be,{attrs:{field:Object(d["a"])({},n.fields[t.split(".")[0]],{value:n.updatedItem[t]||n.item[t],id:t}),isUpdate:n.isUpdate,changeHandler:n.changeHandler}})]))}):null,e("div",{class:"form-group text-right"},[e("div",{class:"btn-group"},[n.showDeleteButton?e("button",{class:"btn btn-danger",attrs:{type:"button"},on:{click:function(){return n.deleteHandler(n.item.id)}}},["Borrar"]):null,n.hideCancel?null:e("button",{class:"btn btn-warning",attrs:{type:"button"},on:{click:n.cancel}},["Cancelar"]),e("button",{class:"btn btn-primary"},["Guardar"])])])])}},$e=Ee,Re={functional:!0,render:function(e,t){var n=t.props;return e("div",{class:"table-responsive"},[e("table",{class:"table table"},[n.field_configs?e("thead",{class:"thead-dark"},[e("tr",[n.field_configs.order.map(function(t){var i=Object(te["d"])(n.fields,t);return e("th",{class:"no-wrap ".concat(n.fields[i].class)},[n.fields[i].display_name])}),e("th",{class:"text-right"})])]):null,n.items&&n.items.length?e("tbody",[n.items.map(function(t){return e("tr",{class:"".concat(n.deleting==t.id?"table-dark inactive":"")},[n.field_configs.order.map(function(i){var r,a=Object(te["d"])(n.fields,i);return r=n.fields[a].formatter||null,e("router-link",{attrs:{tag:n.fields[a].is_primary?"th":"td",to:{path:t.id.toString()},append:!0},class:n.fields[a].class},[r?e(r,{attrs:{value:Object(te["c"])(t,i.split("."))}}):Object(te["c"])(t,i.split("."))])}),e("td",{class:"text-right"},[e("div",{class:"btn-group"},[n.showEditButton?e("router-link",{attrs:{to:{path:t.id.toString()},append:!0},class:"btn btn-primary btn-sm"},[e("i",{class:"fas fa-edit"})]):null,n.showDeleteButton?e("button",{class:"btn btn-danger btn-sm",on:{click:function(){return n.deleteHandler(t.id)}},attrs:{disabled:n.deleting==t.id}},[e("i",{class:"fas ".concat(n.deleting==t.id?"fa-spinner fa-spin":"fa-trash")})]):null])])])})]):null])])}},Pe=Re,Ue={components:{FormGenerator:$e,DataGrid:Pe},data:function(){return{is_saving:!1,is_deleting:!1,entity:null,item:{stocks:[],stock:null,office_id:null},roll:{yd_quantity:null,quantity:null}}},created:function(){this.setEntity("almacen")},computed:Object(d["a"])({},Object(u["e"])("app",["selectedOffice"])),methods:{rollSubmitHandler:function(){var e=X(this.roll.quantity);this.item.stocks.push({quantity:e,remaining_quantity:e,id:this.item.stocks.length+1}),this.item.stock+=E()(e),this.roll.yd_quantity=null,this.roll.quantity=null},submitHandler:function(){var e=Object(c["a"])(regeneratorRuntime.mark(function e(){var t,n,i,r;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(!this.is_saving){e.next=2;break}return e.abrupt("return");case 2:return this.is_saving=!0,e.next=5,Object(te["a"])({url:"/api/".concat(this.entity.url),data:this.item,method:"post"});case 5:t=e.sent,n=Object(I["a"])(t,2),i=n[0],r=n[1],i?console.log(i):(PNotify.success("Registro guardado con exito"),this.$router.replace("/almacen/lista/".concat(r.data.id))),this.is_saving=!1;case 11:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),rollDeleteHandler:function(e){var t=this.item.stocks.findIndex(function(t){return t.id==e});-1!==t&&(this.item.stock-=E()(this.item.stocks[t].quantity),this.item.stocks.splice(t,1))},deleteHandler:function(){var e=Object(c["a"])(regeneratorRuntime.mark(function e(t){var n,i,r;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(!this.is_deleting){e.next=2;break}return e.abrupt("return");case 2:return this.is_deleting=!0,e.next=5,Object(te["a"])({url:"/api/".concat(this.entity.url,"/").concat(t),method:"delete"});case 5:n=e.sent,i=Object(I["a"])(n,1),r=i[0],r?console.log(r):this.$router.go(-1),this.is_deleting=!1;case 10:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}(),changeHandler:function(e,t){this.item[e]=t},rollChangeHandler:function(e,t){"yd_quantity"==e?this.roll.quantity=.9144*t:"quantity"==e&&(this.roll.yd_quantity=1.09361*t),this.roll[e]=t},setEntity:function(e){if(!Ne(e))return this.$router.replace("/");this.entity=De(e),this.item.office_id=this.selectedOffice.id}}},Le=Ue,Me=Object(y["a"])(Le,D,N,!1,null,null,null),Te=Me.exports,Ae=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.entity&&e.entityItem({entity:e.entity.url,id:e.$route.params.id})?n("div",{staticClass:"container-fluid"},[n("div",{staticClass:"card"},[n("div",{staticClass:"card-body"},[n("div",{staticClass:"card-title"},[n("h2",[e._v(e._s(e.entity.display_single_name)+" #"+e._s(e.entityItem({entity:e.entity.url,id:e.$route.params.id}).id))]),e.entityItem({entity:e.entity.url,id:e.$route.params.id}).updated_at?n("small",{staticClass:"text-muted"},[e._v("Ultima modificación: "+e._s(e.entityItem({entity:e.entity.url,id:e.$route.params.id}).updated_at))]):e._e()]),n("FormGenerator",{attrs:{item:e.entityItem({entity:e.entity.url,id:e.$route.params.id}),updatedItem:e.item,isUpdate:!0,fields:e.entity.fields,field_configs:e.entity.field_configurations.form,showDeleteButton:e.entity.field_configurations.form.showDeleteButton,submitHandler:e.submitHandler,changeHandler:e.changeHandler,deleteHandler:e.deleteHandler,saving:e.is_saving,deleting:e.is_deleting,cancel:function(){return e.$router.go(-1)}}})],1)]),n("div",{staticClass:"card"},[n("div",{staticClass:"card-body"},[n("div",{staticClass:"card-title"},[n("h2",[e._v("Rollos")]),n("FormGenerator",{attrs:{item:{},updatedItem:e.roll,fields:{yd_quantity:{display_name:"Cantidad (yd)",render_type:"number"},quantity:{required:!0,display_name:"Cantidad (m)",render_type:"number"}},field_configs:{order:["yd_quantity","quantity"]},submitHandler:e.rollSubmitHandler,changeHandler:e.rollChangeHandler,hideCancel:!0}}),e.entityItem({entity:e.entity.url,id:e.$route.params.id}).stocks.length?n("DataGrid",{attrs:{items:e.entityItem({entity:e.entity.url,id:e.$route.params.id}).stocks,fields:{id:{display_name:"ID"},quantity:{display_name:"Cantidad (m)",class:"text-right"},remaining_quantity:{display_name:"Cantidad Restante (m)",class:"text-right"}},field_configs:{order:["id","quantity","remaining_quantity"]},showDeleteButton:!0,deleteHandler:e.rollDeleteHandler}}):e._e()],1)])])]):e._e()},Fe=[],Ge={components:{FormGenerator:$e,DataGrid:Pe},data:function(){return{is_saving:!1,is_deleting:!1,entity:null,item:{stocks:[]},roll:{yd_quantity:null,quantity:null}}},created:function(){this.setEntity("almacen")},methods:{rollSubmitHandler:function(){var e=Object(c["a"])(regeneratorRuntime.mark(function e(){var t,n,i,r;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(!this.is_saving){e.next=2;break}return e.abrupt("return");case 2:return t=X(this.roll.quantity),this.is_saving=!0,e.next=6,Object(te["a"])({url:"/api/stock_details",data:{quantity:t,remaining_quantity:t,stock_id:this.entityItem({entity:this.entity.url,id:this.$route.params.id}).id},method:"post"});case 6:n=e.sent,i=Object(I["a"])(n,2),r=i[0],i[1],r?console.log(r):PNotify.success("Registro guardado con exito"),this.is_saving=!1,this.roll.yd_quantity=null,this.roll.quantity=null;case 14:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),submitHandler:function(){var e=Object(c["a"])(regeneratorRuntime.mark(function e(){var t,n,i,r=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(!this.is_saving){e.next=2;break}return e.abrupt("return");case 2:if(R()(this.item).forEach(function(e){return r.item[e]==r.entityItem({entity:r.entity.url,id:r.$route.params.id})[e]?delete r.item[e]:""}),R()(this.item).length){e.next=5;break}return e.abrupt("return",PNotify.info("No hay ningun cambio a guardar"));case 5:return this.is_saving=!0,e.next=8,Object(te["a"])({url:"/api/".concat(this.entity.url,"/").concat(this.$route.params.id),data:this.item,method:"put"});case 8:t=e.sent,n=Object(I["a"])(t,1),i=n[0],i?console.log(i):PNotify.success("Registro guardado con exito"),this.is_saving=!1;case 13:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),deleteHandler:function(){var e=Object(c["a"])(regeneratorRuntime.mark(function e(t){var n,i,r;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(!this.is_deleting){e.next=2;break}return e.abrupt("return");case 2:return this.is_deleting=!0,e.next=5,Object(te["a"])({url:"/api/".concat(this.entity.url,"/").concat(t),method:"delete"});case 5:n=e.sent,i=Object(I["a"])(n,1),r=i[0],r?console.log(r):this.$router.go(-1),this.is_deleting=!1;case 10:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}(),rollDeleteHandler:function(){var e=Object(c["a"])(regeneratorRuntime.mark(function e(t){var n,i,r;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(!this.is_deleting){e.next=2;break}return e.abrupt("return");case 2:return this.is_deleting=!0,e.next=5,Object(te["a"])({url:"/api/stock_details/".concat(t),method:"delete"});case 5:n=e.sent,i=Object(I["a"])(n,1),r=i[0],r&&console.log(r),this.is_deleting=!1;case 10:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}(),changeHandler:function(e,t){this.entityItem({entity:this.entity.url,id:this.$route.params.id})[e]!=t?this.item[e]=t:delete this.item[e]},rollChangeHandler:function(e,t){"yd_quantity"==e?this.roll.quantity=.9144*t:"quantity"==e&&(this.roll.yd_quantity=1.09361*t),this.roll[e]=t},setEntity:function(e){if(!Ne(e))return this.$router.replace("/");this.entity=De(e)}},computed:Object(d["a"])({},Object(u["c"])("entities",["entityItem"]))},Ve=Ge,Je=Object(y["a"])(Ve,Ae,Fe,!1,null,null,null),We=Je.exports,Xe=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.entity?n("div",{staticClass:"container-fluid"},[n("div",{staticClass:"card"},[n("div",{staticClass:"card-body"},[n("div",{staticClass:"card-title"},[n("h2",[e._v("\n          "+e._s(e.entity.display_name)+"\n          "),e.entity.field_configurations.list.showCreateButton?n("div",{staticClass:"float-right btn-group"},[n("router-link",{staticClass:"btn btn-success btn-sm",attrs:{to:"crear",append:""}},[n("i",{staticClass:"fas fa-plus"})])],1):e._e()]),n("SearchBox",{attrs:{changeHandler:function(t){return e.debounceHandler("searchHandler",t)},search:e.params.search}}),n("DataGrid",{attrs:{items:e.entityItems({entity:e.entity.url,params:Object.assign({},e.params,{office:e.selectedOffice})}),fields:e.entity.fields,field_configs:e.entity.field_configurations.list,showEditButton:e.entity.field_configurations.list.showEditButton,showDeleteButton:e.entity.field_configurations.list.showDeleteButton,deleteHandler:e.deleteHandler,deleting:e.deleting_id}})],1)])])]):e._e()},ze=[],Qe=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("form",{attrs:{autocomplete:"off"},on:{submit:function(e){e.preventDefault()}}},[n("div",{staticClass:"form-group"},[n("div",{staticClass:"input-group"},[n("input",{staticClass:"form-control",attrs:{id:"search",type:"text",placeholder:"Buscar..."},domProps:{value:e.search},on:{keyup:e.onChange}})])])])},Ke=[],Ye={props:{changeHandler:{required:!0},search:{default:""}},methods:{onChange:function(e){this.changeHandler(e.target.value)}}},Ze=Ye,et=Object(y["a"])(Ze,Qe,Ke,!1,null,null,null),tt=et.exports,nt={components:{DataGrid:Pe,SearchBox:tt},data:function(){return{params:{keys:[],search:""},is_deleting:!1,deleting_id:null,entity:null}},created:function(){this.setEntity(this.$route.params.entity)},methods:{deleteHandler:function(){var e=Object(c["a"])(regeneratorRuntime.mark(function e(t){var n,i,r;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(!this.is_deleting){e.next=2;break}return e.abrupt("return");case 2:return this.is_deleting=!0,this.deleting_id=t,e.next=6,Object(te["a"])({url:"/api/".concat(this.entity.url,"/").concat(t),method:"delete"});case 6:n=e.sent,i=Object(I["a"])(n,1),r=i[0],r&&console.log(r),this.is_deleting=!1;case 11:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}(),debounceHandler:_.debounce(function(e,t){this[e](t)},600),searchHandler:function(e){this.params.search=e},setEntity:function(e){if(!Ne(e))return this.$router.replace("/");this.entity=De(e),this.deleting_id=null,this.params.keys=this.entity.field_configurations.list.order,this.params.search=""}},computed:Object(d["a"])({},Object(u["c"])("entities",["entityItems"]),Object(u["e"])("app",["selectedOffice"])),watch:{"$route.params.entity":function(e){this.setEntity(e)}}},it=nt,rt=Object(y["a"])(it,Xe,ze,!1,null,null,null),at=rt.exports,st=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.entity?n("div",{staticClass:"container-fluid"},[n("div",{staticClass:"card"},[n("div",{staticClass:"card-body"},[n("div",{staticClass:"card-title"},[n("h2",[e._v(e._s(e.entity.display_single_name))])]),n("FormGenerator",{attrs:{item:{},updatedItem:e.item,fields:e.entity.fields,field_configs:e.entity.field_configurations.form,submitHandler:e.submitHandler,changeHandler:e.changeHandler,saving:e.is_saving,cancel:function(){return e.$router.go(-1)}}})],1)])]):e._e()},ot=[],lt={components:{FormGenerator:$e},data:function(){return{is_saving:!1,is_deleting:!1,entity:null,item:{}}},created:function(){this.setEntity(this.$route.params.entity)},methods:{submitHandler:function(){var e=Object(c["a"])(regeneratorRuntime.mark(function e(){var t,n,i,r;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(!this.is_saving){e.next=2;break}return e.abrupt("return");case 2:return this.is_saving=!0,e.next=5,Object(te["a"])({url:"/api/".concat(this.entity.url),data:this.item,method:"post"});case 5:t=e.sent,n=Object(I["a"])(t,2),i=n[0],r=n[1],i?console.log(i):(PNotify.success("Registro guardado con exito"),this.$router.replace("/".concat(this.$route.params.entity,"/lista/").concat(r.data.id))),this.is_saving=!1;case 11:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),deleteHandler:function(){var e=Object(c["a"])(regeneratorRuntime.mark(function e(t){var n,i,r;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(!this.is_deleting){e.next=2;break}return e.abrupt("return");case 2:return this.is_deleting=!0,e.next=5,Object(te["a"])({url:"/api/".concat(this.entity.url,"/").concat(t),method:"delete"});case 5:n=e.sent,i=Object(I["a"])(n,1),r=i[0],r?console.log(r):this.$router.go(-1),this.is_deleting=!1;case 10:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}(),changeHandler:function(e,t){this.item[e]=t},setEntity:function(e){if(!Ne(e))return this.$router.replace("/");this.entity=De(e)}}},dt=lt,ct=Object(y["a"])(dt,st,ot,!1,null,null,null),ut=ct.exports,pt=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.entity&&e.entityItem({entity:e.entity.url,id:e.$route.params.id})?n("div",{staticClass:"container-fluid"},[n("div",{staticClass:"card"},[n("div",{staticClass:"card-body"},[n("div",{staticClass:"card-title"},[n("h2",[e._v(e._s(e.entity.display_single_name)+" #"+e._s(e.entityItem({entity:e.entity.url,id:e.$route.params.id}).id))]),e.entityItem({entity:e.entity.url,id:e.$route.params.id}).updated_at?n("small",{staticClass:"text-muted"},[e._v("Ultima modificación: "+e._s(e.entityItem({entity:e.entity.url,id:e.$route.params.id}).updated_at))]):e._e()]),n("FormGenerator",{attrs:{item:e.entityItem({entity:e.entity.url,id:e.$route.params.id}),updatedItem:e.item,isUpdate:!0,fields:e.entity.fields,field_configs:e.entity.field_configurations.form,showDeleteButton:e.entity.field_configurations.form.showDeleteButton,submitHandler:e.submitHandler,changeHandler:e.changeHandler,deleteHandler:e.deleteHandler,saving:e.is_saving,deleting:e.is_deleting,cancel:function(){return e.$router.go(-1)}}})],1)])]):e._e()},ft=[],mt={components:{FormGenerator:$e},data:function(){return{is_saving:!1,is_deleting:!1,entity:null,item:{}}},created:function(){this.setEntity(this.$route.params.entity)},methods:{submitHandler:function(){var e=Object(c["a"])(regeneratorRuntime.mark(function e(){var t,n,i,r=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(!this.is_saving){e.next=2;break}return e.abrupt("return");case 2:if(R()(this.item).forEach(function(e){return r.item[e]==r.entityItem({entity:r.entity.url,id:r.$route.params.id})[e]?delete r.item[e]:""}),R()(this.item).length){e.next=5;break}return e.abrupt("return",PNotify.info("No hay ningun cambio a guardar"));case 5:return this.is_saving=!0,e.next=8,Object(te["a"])({url:"/api/".concat(this.entity.url,"/").concat(this.$route.params.id),data:this.item,method:"put"});case 8:t=e.sent,n=Object(I["a"])(t,1),i=n[0],i?console.log(i):PNotify.success("Registro guardado con exito"),this.is_saving=!1;case 13:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),deleteHandler:function(){var e=Object(c["a"])(regeneratorRuntime.mark(function e(t){var n,i,r;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(!this.is_deleting){e.next=2;break}return e.abrupt("return");case 2:return this.is_deleting=!0,e.next=5,Object(te["a"])({url:"/api/".concat(this.entity.url,"/").concat(t),method:"delete"});case 5:n=e.sent,i=Object(I["a"])(n,1),r=i[0],r?console.log(r):this.$router.go(-1),this.is_deleting=!1;case 10:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}(),changeHandler:function(e,t){this.entityItem({entity:this.entity.url,id:this.$route.params.id})[e]!=t?this.item[e]=t:delete this.item[e]},setEntity:function(e){if(!Ne(e))return this.$router.replace("/");this.entity=De(e)}},computed:Object(d["a"])({},Object(u["c"])("entities",["entityItem"]))},ht=mt,yt=Object(y["a"])(ht,pt,ft,!1,null,null,null),gt=yt.exports;a["a"].use(s["a"]);var bt={functional:!0,render:function(e){return e("router-view")}},_t={functional:!0,render:function(e){return e("div")}},vt=[{path:"/",component:H,children:[{path:"",component:_t},{path:"/home",component:_t,display_name:"Inicio"},{path:"/almacen",redirect:"/almacen/lista",display_name:"Almacen"},{path:"/movimientos-almacen",redirect:"/movimientos-almacen/lista",display_name:"Movimientos de Almacén"},{path:"/gestion",component:bt,display_name:"Gestion",children:[{path:"/colores",redirect:"/colores/lista",display_name:"Colores"},{path:"/disenos",redirect:"/disenos/lista",display_name:"Diseños"},{path:"/telas",redirect:"/telas/lista",display_name:"Telas"},{path:"/modelos",redirect:"/modelos/lista",display_name:"Modelos"},{path:"/sucursales",redirect:"/sucursales/lista",display_name:"Sucursales"},{path:"/clientes",redirect:"/clientes/lista",display_name:"Clientes"},{path:"/proveedores",redirect:"/proveedores/lista",display_name:"Proveedores"},{path:"/usuarios",redirect:"/usuarios/lista",display_name:"Usuarios"}]},{path:"/:entity/lista",component:at},{path:"/almacen/lista/crear",component:Te},{path:"/almacen/lista/:id",component:We},{path:"/:entity/lista/crear",component:ut},{path:"/:entity/lista/:id",component:gt}]},{path:"/login",name:"login",component:function(){return n.e("chunk-37a22b8e").then(n.bind(null,"013f"))}},{path:"*",redirect:"/"}],wt=new s["a"]({mode:"history",routes:vt}),Ot=n("5176"),xt=n.n(Ot),kt=n("bd86"),Ct=Object(d["a"])({},Ie()),jt={entityItems:function(e){return function(t){var n=t.entity,i=t.params,r=void 0===i?{search:"",office:null}:i,a=e[n];return r.office&&"stocks"===n&&(a=a.filter(function(e){return e.office_id==r.office.id})),r.search?Object(te["b"])(a,r.search,r.keys):a}},entityItem:function(e){return function(t){var n=t.entity,i=t.id;return e[n].find(function(e){return e.id==i})}}},St={setNotifications:function(){var e=Object(c["a"])(regeneratorRuntime.mark(function e(t,n){var i,r;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:i=t.commit,r={},n.forEach(function(e){r[e.entity_id]||(r[e.entity_id]=[]),r[e.entity_id].push(e)}),n=[],R()(r).forEach(function(e){r[e].length>2?n.push(Object(d["a"])({},r[e][0],{type:2})):n=n.concat(r[e])}),n.forEach(function(){var e=Object(c["a"])(regeneratorRuntime.mark(function e(t){var n,r,a,s,o,l,d,c,u,p,f,m;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(1!=t.type){e.next=10;break}return e.next=3,Object(te["a"])({url:"/api/".concat(t.entity.name,"/").concat(t.entity_value_id)});case 3:n=e.sent,r=Object(I["a"])(n,2),a=r[0],s=r[1],a||i("onCreate",{entity:t.entity.name,createdValue:s}),e.next=31;break;case 10:if(2!=t.type){e.next=20;break}return e.next=13,Object(te["a"])({url:"/api/".concat(t.entity.name)});case 13:o=e.sent,l=Object(I["a"])(o,2),d=l[0],c=l[1],d||i("setInitialValues",Object(kt["a"])({},t.entity.name,c)),e.next=31;break;case 20:if(3!=t.type){e.next=30;break}return e.next=23,Object(te["a"])({url:"/api/".concat(t.entity.name,"/").concat(t.entity_value_id)});case 23:u=e.sent,p=Object(I["a"])(u,2),f=p[0],m=p[1],f||i("onUpdate",{entity:t.entity.name,id:t.entity_value_id,updatedValue:m}),e.next=31;break;case 30:4==t.type&&i("onDelete",{entity:t.entity.name,id:t.entity_value_id});case 31:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}());case 6:case"end":return e.stop()}},e)}));function t(t,n){return e.apply(this,arguments)}return t}()},qt={setInitialValues:function(e,t){var n=xt()({},t);R()(n).forEach(function(t){return e[t]=n[t]})},onCreate:function(e,t){var n=t.entity,i=t.createdValue;e[n].push(i)},onUpdate:function(e,t){var n=t.entity,i=t.id,r=t.updatedValue,s=e[n].findIndex(function(e){return e.id==i});s>-1?a["a"].set(e[n],s,r):e[n].push(r)},onDelete:function(e,t){var n=t.entity,i=t.id,r=e[n].findIndex(function(e){return e.id==i});r>-1&&e[n].splice(r,1)}},Ht={namespaced:!0,state:Ct,getters:jt,actions:St,mutations:qt},Dt={authenticated:localStorage.getItem("authenticated")?JSON.parse(localStorage.authenticated):null,user:localStorage.getItem("user")?JSON.parse(localStorage.user):null,user_id:localStorage.getItem("user_id")?JSON.parse(localStorage.user_id):null,token:localStorage.getItem("token")||null},Nt={},It={isAuthenticated:function(e){var t=e.state;return!!(t.authenticated&&t.user&&t.user_id&&t.token)},login:function(e,t){var n=e.commit,i=t.user,r=t.token,a=t.callback;n("login",{user:i,token:r}),a&&a()},logout:function(e,t){var n=e.commit,i=t.callback;n("logout"),i&&i()},setState:function(e,t){var n=e.commit;R()(t).forEach(function(e){n("setState",Object(kt["a"])({},e,t[e]))})}},Bt={setState:function(e,t){Object(te["e"])(e,t)},login:function(e,t){var n=t.user,i=t.token;Object(te["e"])(e,{authenticated:!0,user_id:n.id,token:i,user:n})},logout:function(e){Object(te["e"])(e,{authenticated:!1,user_id:null,token:null,user:null}),localStorage.clear()}},Et={namespaced:!0,state:Dt,getters:Nt,actions:It,mutations:Bt},$t=function e(t){var n=[];return t.forEach(function(t){if(t.children&&t.display_name){var i=e(t.children);i.length&&n.push({name:t.display_name,children:i})}else if(t.display_name)n.push({to:t.path,name:t.display_name});else if(t.children){var r=e(t.children);r.length&&(n=n.concat(r))}}),n},Rt={showSidebar:window.innerWidth>991,selectedOffice:{},menu:$t(vt)},Pt={},Ut={selectOffice:function(e,t){var n=e.commit;n("selectOffice",t)},toggleSidebar:function(e){var t=e.commit;t("toggleSidebar")}},Lt={selectOffice:function(e,t){e.selectedOffice=t},toggleSidebar:function(e){e.showSidebar=!e.showSidebar}},Mt={namespaced:!0,state:Rt,getters:Pt,actions:Ut,mutations:Lt};a["a"].use(u["a"]);var Tt={modules:{entities:Ht,auth:Et,app:Mt}},At=new u["a"].Store(Tt),Ft=n("9483");Object(Ft["a"])("".concat("/","service-worker.js"),{ready:function(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered:function(){console.log("Service worker has been registered.")},cached:function(){console.log("Content has been cached for offline use.")},updatefound:function(){console.log("New content is downloading.")},updated:function(){console.log("New content is available; please refresh.")},offline:function(){console.log("No internet connection found. App is running in offline mode.")},error:function(e){console.error("Error during service worker registration:",e)}}),a["a"].config.productionTip=!1,new a["a"]({router:wt,store:At,render:function(){var e=arguments[0];return e("router-view")}}).$mount("#app")},"7e6a":function(e,t,n){},"8d1b":function(e,t,n){e.exports=n.p+"img/logo-144.74ea420c.png"},aa80:function(e,t,n){},bc17:function(e,t,n){},d507:function(e,t,n){},ed08:function(e,t,n){"use strict";n.d(t,"a",function(){return p}),n.d(t,"e",function(){return f}),n.d(t,"d",function(){return m}),n.d(t,"c",function(){return h}),n.d(t,"b",function(){return y});n("6762"),n("2fdb"),n("28a5");var i=n("f499"),r=n.n(i),a=n("5176"),s=n.n(a),o=n("7618"),l=n("a4bb"),d=n.n(l),c=(n("ac6a"),0),u=!1,p=function e(t){var n=t.method,i=void 0===n?"get":n,r=t.url,a=t.data,s=void 0===a?{}:a,o=t.params,l=void 0===o?null:o;return axios({method:i,url:r,data:s,params:l}).then(function(e){return u&&(u=!1,PNotify.success("Conexiòn restablecida")),[null,e.data]}).catch(function(t){if(t.response){var n=t.response.status;if(c<3&&500==n)return c++,e({method:i,url:r,data:s,params:l});c=0}else u=!0,PNotify.error("Ocurrio un problema en la red... Reintenta en unos segundos");return[t]})},f=function(e,t){d()(t).forEach(function(n){"object"===Object(o["a"])(t[n])?(e[n]=s()({},t[n]),localStorage[n]=r()(t[n])):(e[n]=t[n],localStorage[n]=t[n])})},m=function e(t,n){if(t[n])return n;if(-1!=n.indexOf(".")){var i=n.split(".").length,r=n.split(".");return r.splice(i-1,1).join("."),e(t,r.join("."))}},h=function e(t,n,i){var a="";if(i){var s=m(t,i.join("."));if(s)return r()(t[s])}var l=n[0];if("object"===Object(o["a"])(t[l])&&null!==t[l]&&n.length>1){var d=n.slice(1);d&&(a=e(t[l],d))}else a=t[l];return a},y=function(e,t,n){var i=t.toLowerCase();return e.filter(function(e){return n.some(function(t){return-1!==t.indexOf(".")?String(h(e,t.split("."),t.split("."))).toLowerCase().includes(i):null!==e[t]&&String(e[t]).toLowerCase().includes(i)})})}}});
//# sourceMappingURL=app.ebbf6402.js.map